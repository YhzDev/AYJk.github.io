<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>AYJk的技术博客</title>
  <subtitle>不管怎么样，我就是要漂移。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="ayjkdev.top/"/>
  <updated>2016-05-09T02:32:13.000Z</updated>
  <id>ayjkdev.top/</id>
  
  <author>
    <name>AYJk</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>弹性下拉刷新控件PMElasticRefresh</title>
    <link href="ayjkdev.top/2016/05/08/pmelasticrefresh-achieve/"/>
    <id>ayjkdev.top/2016/05/08/pmelasticrefresh-achieve/</id>
    <published>2016-05-08T08:50:17.000Z</published>
    <updated>2016-05-09T02:32:13.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;PMElasticRefresh&quot;&gt;&lt;a href=&quot;#PMElasticRefresh&quot; class=&quot;headerlink&quot; title=&quot;PMElasticRefresh&quot;&gt;&lt;/a&gt;PMElasticRefresh&lt;/h1&gt;&lt;p&gt;一款弹性动画的下拉刷新控件，已经发布在&lt;a href=&quot;https://github.com/PoisonousMilk/PMElasticRefresh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;上了，可自行下载。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;h2 id=&quot;PMElasticRefresh-1&quot;&gt;&lt;a href=&quot;#PMElasticRefresh-1&quot; class=&quot;headerlink&quot; title=&quot;PMElasticRefresh&quot;&gt;&lt;/a&gt;PMElasticRefresh&lt;/h2&gt;&lt;p&gt;写这个控件是因为公司设计某一天发给我一张Gif效果图并对我说：“来小伙子，咱们玩点好玩的。”表示彻底被骗了，我以为可以出去浪了，说好的好玩的呢。。。&lt;br&gt;言归正传，先看下效果图吧：&lt;br&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/2016-05-08%2017_11_56.gif&quot; alt=&quot;动画效果&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;结构&quot;&gt;&lt;a href=&quot;#结构&quot; class=&quot;headerlink&quot; title=&quot;结构&quot;&gt;&lt;/a&gt;结构&lt;/h2&gt;&lt;p&gt;在tableView上添加一个PMElasticView，在这个View上进行动画的绘制。&lt;br&gt;PMElasticView上的动画绘制分为三部分：&lt;br&gt;1&amp;gt; 第一部分为下拉时的天蓝色背景，下拉超过动画最大设定距离，抬手时最下面的线条会有回弹效果。&lt;br&gt;2&amp;gt; 第二部分为原型白色小球的上升动画。&lt;br&gt;3&amp;gt; 第三部分为环绕白色小球的圆环动画。&lt;/p&gt;
&lt;h1 id=&quot;实现&quot;&gt;&lt;a href=&quot;#实现&quot; class=&quot;headerlink&quot; title=&quot;实现&quot;&gt;&lt;/a&gt;实现&lt;/h1&gt;&lt;h2 id=&quot;下拉背景&quot;&gt;&lt;a href=&quot;#下拉背景&quot; class=&quot;headerlink&quot; title=&quot;下拉背景&quot;&gt;&lt;/a&gt;下拉背景&lt;/h2&gt;&lt;p&gt;tableView上添加PMElasticView是通过runtime运行时进行添加。将当前的tableView绑定到PMElasticView上的bindingScrollView上使用KVO监听contentOffset。通过使用UIBezierPath进行绘制&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;CGPathRef&lt;/span&gt;)calculateAnimaPathWithOriginY:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)originY &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; topLeftPoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; bottomLeftPoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.offSet_Y&lt;/span&gt; &amp;lt;= AnimationDISTANCE ? &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; : originY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; controlPoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bindingScrollView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bounds&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;, originY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; bottomRightPoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bindingScrollView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bounds&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.offSet_Y&lt;/span&gt; &amp;lt;= AnimationDISTANCE ? &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; : originY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; topRightPoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bindingScrollView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bounds&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *bezierPath = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [bezierPath moveToPoint:topLeftPoint];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [bezierPath addLineToPoint:bottomLeftPoint];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [bezierPath addQuadCurveToPoint:bottomRightPoint controlPoint:controlPoint];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [bezierPath addLineToPoint:topRightPoint];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [bezierPath addLineToPoint:topLeftPoint];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; bezierPath&lt;span class=&quot;variable&quot;&gt;.CGPath&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;controlPoint用于控制产生弧形线条。当达到最大动画距离时，bottomLeftPoint和bottomRightPoint两个点Y坐标恒定等于100。controlPoint的Y坐标继续跟随下拉距离变化。&lt;/p&gt;
&lt;p&gt;松手后KVO中判断&lt;code&gt;isDrag&lt;/code&gt;，若为NO，则调用&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)elasticLayerAnimation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.ballLayer&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.hidden&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.lineLayer&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.hidden&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.elasticShaperLayer&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.path&lt;/span&gt; = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; calculateAnimaPathWithOriginY:ABS(AnimationDISTANCE)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *pathValues = @[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; calculateAnimaPathWithOriginY:ABS(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.offSet_Y&lt;/span&gt;)],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; calculateAnimaPathWithOriginY:ABS(AnimationDISTANCE) * &lt;span class=&quot;number&quot;&gt;0.7&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; calculateAnimaPathWithOriginY:ABS(AnimationDISTANCE) * &lt;span class=&quot;number&quot;&gt;1.3&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; calculateAnimaPathWithOriginY:ABS(AnimationDISTANCE) * &lt;span class=&quot;number&quot;&gt;0.9&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; calculateAnimaPathWithOriginY:ABS(AnimationDISTANCE) * &lt;span class=&quot;number&quot;&gt;1.1&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; calculateAnimaPathWithOriginY:ABS(AnimationDISTANCE)]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                           ];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CAKeyframeAnimation&lt;/span&gt; *elasticAnimation = [&lt;span class=&quot;built_in&quot;&gt;CAKeyframeAnimation&lt;/span&gt; animationWithKeyPath:&lt;span class=&quot;string&quot;&gt;@&quot;path&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    elasticAnimation&lt;span class=&quot;variable&quot;&gt;.values&lt;/span&gt; = pathValues;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    elasticAnimation&lt;span class=&quot;variable&quot;&gt;.timingFunction&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunction&lt;/span&gt; functionWithName:k&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunctionLinear&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    elasticAnimation&lt;span class=&quot;variable&quot;&gt;.duration&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    elasticAnimation&lt;span class=&quot;variable&quot;&gt;.fillMode&lt;/span&gt; = k&lt;span class=&quot;built_in&quot;&gt;CAFillModeForwards&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    elasticAnimation&lt;span class=&quot;variable&quot;&gt;.removedOnCompletion&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    elasticAnimation&lt;span class=&quot;variable&quot;&gt;.delegate&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.elasticShaperLayer&lt;/span&gt; addAnimation:elasticAnimation forKey:&lt;span class=&quot;string&quot;&gt;@&quot;elasticAnimation&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.ballLayer&lt;/span&gt; startAnimation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.lineLayer&lt;/span&gt; startAnimation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;自定义Layer动画完成毕竟的弹性回调效果，(__bridge id)用于ARC下连接OC对象和CoreFoundation对象的桥接。&lt;/p&gt;
&lt;h2 id=&quot;圆形小球&quot;&gt;&lt;a href=&quot;#圆形小球&quot; class=&quot;headerlink&quot; title=&quot;圆形小球&quot;&gt;&lt;/a&gt;圆形小球&lt;/h2&gt;&lt;p&gt;小球通过UIBezierPath绘制&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configShape &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.hidden&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; arcCenterPoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.animationHeight&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bounds&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; arcRadius = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; arcStartAngle = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; arcEndAngle =  M_PI * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *bezierPath = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPathWithArcCenter:arcCenterPoint radius:arcRadius startAngle:arcStartAngle endAngle:arcEndAngle clockwise:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.path&lt;/span&gt; = bezierPath&lt;span class=&quot;variable&quot;&gt;.CGPath&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.fillColor&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.ballColor&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.CGColor&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.strokeEnd&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;动画是通过CoreAnimation实现，刷新开始时从下往上移动，结束刷新从上往下移动并隐藏。&lt;/p&gt;
&lt;h2 id=&quot;圆环&quot;&gt;&lt;a href=&quot;#圆环&quot; class=&quot;headerlink&quot; title=&quot;圆环&quot;&gt;&lt;/a&gt;圆环&lt;/h2&gt;&lt;p&gt;同样也是通过UIBezierPath绘制&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configShape &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; arcCenterPoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; arcRadius = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;1.15&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; arcStartAngle = -M_PI_2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; arcEndAngle = M_PI * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; - M_PI_2 + M_PI / &lt;span class=&quot;number&quot;&gt;8.0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *bezierPath = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPathWithArcCenter:arcCenterPoint radius:arcRadius startAngle:arcStartAngle endAngle:arcEndAngle clockwise:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.path&lt;/span&gt; = bezierPath&lt;span class=&quot;variable&quot;&gt;.CGPath&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.fillColor&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.strokeColor&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.arcStrokeColor&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.CGColor&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.lineWidth&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.lineCap&lt;/span&gt; = k&lt;span class=&quot;built_in&quot;&gt;CALineCapRound&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.strokeStart&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.strokeEnd&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.hidden&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;动画为组合动画，一个旋转效果、一个控制stroke的动画。&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)startAnimation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.hidden&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; *rotateAnimation = [&lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; animationWithKeyPath:&lt;span class=&quot;string&quot;&gt;@&quot;transform.rotation.z&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rotateAnimation&lt;span class=&quot;variable&quot;&gt;.fromValue&lt;/span&gt; = @(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rotateAnimation&lt;span class=&quot;variable&quot;&gt;.toValue&lt;/span&gt; = @(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; * M_PI);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rotateAnimation&lt;span class=&quot;variable&quot;&gt;.duration&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rotateAnimation&lt;span class=&quot;variable&quot;&gt;.fillMode&lt;/span&gt; = k&lt;span class=&quot;built_in&quot;&gt;CAFillModeForwards&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rotateAnimation&lt;span class=&quot;variable&quot;&gt;.removedOnCompletion&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rotateAnimation&lt;span class=&quot;variable&quot;&gt;.timingFunction&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunction&lt;/span&gt; functionWithName:k&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunctionLinear&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rotateAnimation&lt;span class=&quot;variable&quot;&gt;.repeatCount&lt;/span&gt; = HUGE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; addAnimation:rotateAnimation forKey:&lt;span class=&quot;string&quot;&gt;@&quot;rotateAnimation&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; strokeEndAnimation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;strokeEnd动画：&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)strokeEndAnimation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; *strokeEndAnimation = [&lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; animationWithKeyPath:&lt;span class=&quot;string&quot;&gt;@&quot;strokeEnd&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.fromValue&lt;/span&gt; = @(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.toValue&lt;/span&gt; = @(&lt;span class=&quot;number&quot;&gt;.95&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.timingFunction&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunction&lt;/span&gt; functionWithName:k&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunctionEaseInEaseOut&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.duration&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.repeatCount&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.fillMode&lt;/span&gt; = k&lt;span class=&quot;built_in&quot;&gt;CAFillModeForwards&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.removedOnCompletion&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeEndAnimation&lt;span class=&quot;variable&quot;&gt;.delegate&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; addAnimation:strokeEndAnimation forKey:&lt;span class=&quot;string&quot;&gt;@&quot;strokeEndAnimation&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后通过代码方法，当strokeEnd动画结束后执行strokeStart动画。&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)strokeStartAnimation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; *strokeStartAnimation = [&lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; animationWithKeyPath:&lt;span class=&quot;string&quot;&gt;@&quot;strokeStart&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.fromValue&lt;/span&gt; = @(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.toValue&lt;/span&gt; = @(&lt;span class=&quot;number&quot;&gt;.95&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.timingFunction&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunction&lt;/span&gt; functionWithName:k&lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunctionEaseInEaseOut&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.duration&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.repeatCount&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.fillMode&lt;/span&gt; = k&lt;span class=&quot;built_in&quot;&gt;CAFillModeForwards&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.removedOnCompletion&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strokeStartAnimation&lt;span class=&quot;variable&quot;&gt;.delegate&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; addAnimation:strokeStartAnimation forKey:&lt;span class=&quot;string&quot;&gt;@&quot;strokeStartAnimation&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;代理方法中控制动画：&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)animationDidStop:(&lt;span class=&quot;built_in&quot;&gt;CAAnimation&lt;/span&gt; *)anim finished:(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)flag &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (flag) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; *basicAnimation = (&lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt; *)anim;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([basicAnimation&lt;span class=&quot;variable&quot;&gt;.keyPath&lt;/span&gt; isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;strokeEnd&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; strokeStartAnimation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([basicAnimation&lt;span class=&quot;variable&quot;&gt;.keyPath&lt;/span&gt; isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;strokeStart&quot;&lt;/span&gt;])&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; removeAnimationForKey:&lt;span class=&quot;string&quot;&gt;@&quot;strokeStartAnimation&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; removeAnimationForKey:&lt;span class=&quot;string&quot;&gt;@&quot;strokeEndAnimation&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; strokeEndAnimation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h1&gt;&lt;p&gt;使用非常简单&lt;br&gt;导入&lt;strong&gt;#import “PMElasticRefresh.h”&lt;/strong&gt;头文件后调用方法向tableView添加动画&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mainTableView&lt;/span&gt; pm_RefreshHeaderWithBlock:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;refreshBlock&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;完成数据读取，结束刷新动画时调用方法&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mainTableView&lt;/span&gt; endRefresh];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;附上GitHub地址：&lt;a href=&quot;https://github.com/PoisonousMilk/PMElasticRefresh&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PMElasticRefresh&lt;/a&gt;,下载运行即可。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;PMElasticRefresh&quot;&gt;&lt;a href=&quot;#PMElasticRefresh&quot; class=&quot;headerlink&quot; title=&quot;PMElasticRefresh&quot;&gt;&lt;/a&gt;PMElasticRefresh&lt;/h1&gt;&lt;p&gt;一款弹性动画的下拉刷新控件，已经发布在&lt;a href=&quot;https://github.com/PoisonousMilk/PMElasticRefresh&quot;&gt;GitHub&lt;/a&gt;上了，可自行下载。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="PMElasticRefresh" scheme="ayjkdev.top/tags/PMElasticRefresh/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS利用iTunesLookup检查更新</title>
    <link href="ayjkdev.top/2016/04/06/update-in-app-with-itunes-lookup/"/>
    <id>ayjkdev.top/2016/04/06/update-in-app-with-itunes-lookup/</id>
    <published>2016-04-06T13:41:59.000Z</published>
    <updated>2016-04-07T15:30:44.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;iTunesLookup&quot;&gt;&lt;a href=&quot;#iTunesLookup&quot; class=&quot;headerlink&quot; title=&quot;iTunesLookup&quot;&gt;&lt;/a&gt;iTunesLookup&lt;/h1&gt;&lt;p&gt;iTunesLookup其实是有Apple提供的查询应用信息的接口，我们可以利用它来进行App更新提示的功能实现。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;h2 id=&quot;AYCheckVersion&quot;&gt;&lt;a href=&quot;#AYCheckVersion&quot; class=&quot;headerlink&quot; title=&quot;AYCheckVersion&quot;&gt;&lt;/a&gt;AYCheckVersion&lt;/h2&gt;&lt;p&gt;我封装了一个用于提示更新的工具类&lt;a href=&quot;https://github.com/AYJk/AYCheckVersion&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AYCheckVersion&lt;/a&gt;。经过我的测试可以正常进行功能实现，iOS8以下使用UIAlertView，以上就使用UIAlertViewController。只需要调用&lt;code&gt;checkVersion&lt;/code&gt;方法就能进行查询，无需额外的设置。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/Simulator%20Screen%20Shot%202016%E5%B9%B44%E6%9C%887%E6%97%A5%20%E4%B8%8B%E5%8D%8811.24.14.png&quot; alt=&quot;两个按钮情况&quot;&gt;        &lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/Simulator%20Screen%20Shot%202016%E5%B9%B44%E6%9C%887%E6%97%A5%20%E4%B8%8B%E5%8D%8811.25.06.png&quot; alt=&quot;三个按钮情况&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;Tpis：&quot;&gt;&lt;a href=&quot;#Tpis：&quot; class=&quot;headerlink&quot; title=&quot;Tpis：&quot;&gt;&lt;/a&gt;Tpis：&lt;/h3&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;通常情况下，只要调用&lt;code&gt;- (void)checkVersion;&lt;/code&gt;就行了，如果还需要进行进一步的自定义，可以调用类库中提供的其他方法。&lt;/li&gt;
&lt;li&gt;有些情况下，由于app销售地区不同，可能无法从Apple服务器获取数据。这时，只要设置&lt;code&gt;countryAbbreviation&lt;/code&gt;属性就行了，赋值为你销售地区的英文缩写。&lt;/li&gt;
&lt;li&gt;跳转AppStore有两种方式，一种为模态形式弹出AppStore，另一种常规跳转AppStore。通过&lt;code&gt;openAPPStoreInsideAPP&lt;/code&gt;设置布尔值来选择。默认为No，常规跳转。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;数据分析&quot;&gt;&lt;a href=&quot;#数据分析&quot; class=&quot;headerlink&quot; title=&quot;数据分析&quot;&gt;&lt;/a&gt;数据分析&lt;/h1&gt;&lt;p&gt;下图是我公司的App这里当做一个示例，从服务器获取到的JSON数据如下：&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &quot;&lt;span class=&quot;attribute&quot;&gt;resultCount&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &quot;&lt;span class=&quot;attribute&quot;&gt;results&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;screenshotUrls&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;http://a5.mzstatic.com/us/r30/Purple7/v4/ee/78/33/ee7833bc-9a8a-6abe-99de-04d842e75b03/screen1136x1136.jpeg&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;http://a5.mzstatic.com/us/r30/Purple49/v4/20/74/78/20747895-29a2-0507-587b-57204a91aa5d/screen1136x1136.jpeg&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;http://a5.mzstatic.com/us/r30/Purple69/v4/f7/16/b7/f716b7f1-b67f-cd60-3017-1e59ee4b1e10/screen1136x1136.jpeg&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;http://a1.mzstatic.com/us/r30/Purple49/v4/b7/bd/cc/b7bdcc4e-3366-560a-3e7b-1c82e2d07faf/screen1136x1136.jpeg&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;http://a1.mzstatic.com/us/r30/Purple49/v4/f8/f9/4d/f8f94ddf-12f0-343d-52a3-f64790db1e5e/screen1136x1136.jpeg&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;ipadScreenshotUrls&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;artworkUrl60&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;http://is4.mzstatic.com/image/thumb/Purple69/v4/08/d1/60/08d16090-68af-6590-d820-13164a940057/source/60x60bb.jpg&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;artworkUrl512&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;http://is4.mzstatic.com/image/thumb/Purple69/v4/08/d1/60/08d16090-68af-6590-d820-13164a940057/source/512x512bb.jpg&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;artworkUrl100&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;http://is4.mzstatic.com/image/thumb/Purple69/v4/08/d1/60/08d16090-68af-6590-d820-13164a940057/source/100x100bb.jpg&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;artistViewUrl&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;https://itunes.apple.com/cn/developer/hangzhou-yitou-outsource-financial/id1067515154?uo=4&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;kind&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;software&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;supportedDevices&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPad2Wifi&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPad23G&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPhone4S&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPadThirdGen&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPadThirdGen4G&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPhone5&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPodTouchFifthGen&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPadFourthGen&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPadFourthGen4G&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPadMini&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPadMini4G&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPhone5c&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPhone5s&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPhone6&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPhone6Plus&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;iPodTouchSixthGen&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;features&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;advisories&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;isGameCenterEnabled&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;averageUserRatingForCurrentVersion&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;trackCensoredName&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;宜投金服&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;languageCodesISO2A&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;EN&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;ZH&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;fileSizeBytes&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;19505964&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;sellerUrl&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;http://www.yitoujf.com/&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;contentAdvisoryRating&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;4+&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;userRatingCountForCurrentVersion&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;trackViewUrl&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;https://itunes.apple.com/cn/app/yi-tou-jin-fu/id1067515155?mt=8&amp;amp;uo=4&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;trackContentRating&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;4+&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;minimumOsVersion&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;8.0&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;currency&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;CNY&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;wrapperType&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;software&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;version&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;1.4.0&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;artistId&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;1067515154&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;artistName&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;HangZhou YiTou Outsource Of Financial Services Co., Ltd.&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;genres&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;财务&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;price&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;trackName&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;宜投金服&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;trackId&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;1067515155&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;description&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;【产品特点】\n1.低门槛  高收益\n100元即可投资宜投理财产品，尊享9%+的年化收益率。满标后次日开始计息。投资期限短，投资灵活。让你的小投入也能收获大回报！\n2.操作便捷，快速理财\n使用掌上宜投，能够随时随进行查看、投资。独创的投资金额一键拖动模式，轻松玩转指尖理财。\n3.账单明细，一手“掌”握\n投资成功后，即可在个人中心查看“投资”、“收益”、“回款”、”提现”，所有资金明细一目了然，轻松理财、尽在“掌”握。\n4.GSP定位，保障到位\n宜投金服全国首创债权物GPS实时追踪系统。在投资期间，满足您24小时对债权物的实时监控。不论何时何地，都能清晰掌握债权物动向，真正做到放心理财、“坐”享其成。\n\n【安全保障】\n1.合作机构严格准入机制\n2.多重项目审核，严格控制风险\n3.第三方资金全托管，账户专款专用\n4.非银行金融机构100%本息保障\n5.风险准备金中信银行监管&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;bundleId&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;com.yitoujf.YiTouJF&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;releaseDate&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;2016-01-08T00:28:10Z&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;primaryGenreName&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;Finance&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;formattedPrice&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;免费&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;isVppDeviceBasedLicensingEnabled&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;currentVersionReleaseDate&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;2016-03-29T23:09:29Z&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;releaseNotes&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;本次更新：\n--调整操作逻辑，提升用户体验&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;sellerName&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;HangZhou YiTou Outsource Of Financial Services Co., Ltd.&quot;&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;primaryGenreId&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;6015&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &quot;&lt;span class=&quot;attribute&quot;&gt;genreIds&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&quot;6015&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这里我们需要用到的数据：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;trackViewUrl&lt;/code&gt;：常规方式下跳转AppStore的链接。&lt;br&gt;&lt;code&gt;version&lt;/code&gt;：最新的版本号。&lt;br&gt;&lt;code&gt;trackId&lt;/code&gt;：应用内模态AppStore需要的应用id。&lt;br&gt;&lt;code&gt;APPReleaseNotes&lt;/code&gt;：应用更新的内容。&lt;/p&gt;
&lt;h1 id=&quot;方法实现&quot;&gt;&lt;a href=&quot;#方法实现&quot; class=&quot;headerlink&quot; title=&quot;方法实现&quot;&gt;&lt;/a&gt;方法实现&lt;/h1&gt;&lt;h2 id=&quot;数据请求&quot;&gt;&lt;a href=&quot;#数据请求&quot; class=&quot;headerlink&quot; title=&quot;数据请求&quot;&gt;&lt;/a&gt;数据请求&lt;/h2&gt;&lt;p&gt;刚开始的时候公司的App请求更新数据中,一直请求不到数据，返回的一直是&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &quot;&lt;span class=&quot;attribute&quot;&gt;resultCount&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &quot;&lt;span class=&quot;attribute&quot;&gt;results&lt;/span&gt;&quot;: &lt;span class=&quot;value&quot;&gt;[]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;着实让我郁闷了很久，google了很久一直没找到正确的应对方法，最后在StackOverFlow上查到了答案。&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/8839328/itunes-api-lookup-by-bundle-id&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iTunes api, lookup by bundle ID?&lt;/a&gt;&lt;br&gt;在请求的URL后边加上你想要查询的销售地就行了，比如我的App就设置了&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;checkManger&lt;span class=&quot;variable&quot;&gt;.countryAbbreviation&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;@&quot;cn&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;AppStore的跳转方式&quot;&gt;&lt;a href=&quot;#AppStore的跳转方式&quot; class=&quot;headerlink&quot; title=&quot;AppStore的跳转方式&quot;&gt;&lt;/a&gt;AppStore的跳转方式&lt;/h2&gt;&lt;h3 id=&quot;常规跳转&quot;&gt;&lt;a href=&quot;#常规跳转&quot; class=&quot;headerlink&quot; title=&quot;常规跳转&quot;&gt;&lt;/a&gt;常规跳转&lt;/h3&gt;&lt;p&gt;很简单，只要获取到&lt;code&gt;trackViewUrl&lt;/code&gt;后，通过&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; sharedApplication] openURL:[&lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; URLWithString:[userDefault objectForKey:APP_TRACK_VIEW_URL]]];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;进行跳转就OK。&lt;/p&gt;
&lt;h3 id=&quot;模态弹出&quot;&gt;&lt;a href=&quot;#模态弹出&quot; class=&quot;headerlink&quot; title=&quot;模态弹出&quot;&gt;&lt;/a&gt;模态弹出&lt;/h3&gt;&lt;p&gt;这里需要导入&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#import &lt;span class=&quot;title&quot;&gt;&amp;lt;StoreKit/StoreKit.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后进行初始化和赋值操作、设置代理&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SKStoreProductViewController *storeViewController = [[SKStoreProductViewController alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;storeViewController&lt;span class=&quot;variable&quot;&gt;.delegate&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *parametersDic = @&amp;#123;SKStoreProductParameterITunesItemIdentifier:[userDefault objectForKey:TRACK_ID]&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[storeViewController loadProductWithParameters:parametersDic completionBlock:^(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; result, &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; * _Nullable error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [[&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; sharedApplication]&lt;span class=&quot;variable&quot;&gt;.keyWindow&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.rootViewController&lt;/span&gt; presentViewController:storeViewController animated:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; completion:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实现代理方法&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)productViewControllerDidFinish:(SKStoreProductViewController *)viewController &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [[&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; sharedApplication]&lt;span class=&quot;variable&quot;&gt;.keyWindow&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.rootViewController&lt;/span&gt; dismissViewControllerAnimated:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; completion:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;关于审核&quot;&gt;&lt;a href=&quot;#关于审核&quot; class=&quot;headerlink&quot; title=&quot;关于审核&quot;&gt;&lt;/a&gt;关于审核&lt;/h1&gt;&lt;p&gt;苹果方便其实是不会让你进行更新提示的，一方面这样会对UE有一点损失，另一方面，你当我AppStore不会提示更新是吗？苹果如是说。&lt;br&gt;所以这里，我进行了判断处理，比如你当前上架版本是1.0.0，你要上线1.0.1提交审核，在你应用还没上架之前，也就是开发和审核阶段，都不会弹出提示框进行提示。排除了这部分被拒的可能性。&lt;/p&gt;
&lt;h1 id=&quot;源代码&quot;&gt;&lt;a href=&quot;#源代码&quot; class=&quot;headerlink&quot; title=&quot;源代码&quot;&gt;&lt;/a&gt;源代码&lt;/h1&gt;&lt;p&gt;GitHub链接：&lt;a href=&quot;https://github.com/AYJk/AYCheckVersion&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AYCheckVersion&lt;/a&gt;，看官大人来波star鼓励下吧。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;iTunesLookup&quot;&gt;&lt;a href=&quot;#iTunesLookup&quot; class=&quot;headerlink&quot; title=&quot;iTunesLookup&quot;&gt;&lt;/a&gt;iTunesLookup&lt;/h1&gt;&lt;p&gt;iTunesLookup其实是有Apple提供的查询应用信息的接口，我们可以利用它来进行App更新提示的功能实现。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
      <category term="iTunesLookup" scheme="ayjkdev.top/tags/iTunesLookup/"/>
    
  </entry>
  
  <entry>
    <title>不触发离屏渲染的情况下设置圆角</title>
    <link href="ayjkdev.top/2016/04/05/corner-radius-with-out-offscreen-rendered/"/>
    <id>ayjkdev.top/2016/04/05/corner-radius-with-out-offscreen-rendered/</id>
    <published>2016-04-05T15:08:51.000Z</published>
    <updated>2016-05-08T09:27:53.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;离屏渲染是导致APP性能损失的一大问题，开发时应该尽可能的避免。所以趁着节假日花了一点时间写了一个工具类。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;APP中通常使用 UITableView 来进行界面的展示，滑动时的流畅性很大程度上决定了一个APP的质量。这里首先使用Instruments来看离屏渲染的情况：&lt;/p&gt;
&lt;p&gt;使用 AYViewCorner&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/IMG_064.PNG&quot; alt=&quot;使用AYViewCorner&quot;&gt;&lt;/p&gt;
&lt;p&gt;使用 CornerRadius&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/IMG_065.PNG&quot; alt=&quot;使用CornerRadius&quot;&gt;&lt;/p&gt;
&lt;p&gt;假设APP中有大量需要展示圆角的图片，注意这里的前提是大量圆角图片或者是你已经能感觉到卡顿的情况下，有几种方案可以参考：&lt;/p&gt;
&lt;h2 id=&quot;切图&quot;&gt;&lt;a href=&quot;#切图&quot; class=&quot;headerlink&quot; title=&quot;切图&quot;&gt;&lt;/a&gt;切图&lt;/h2&gt;&lt;p&gt;直接让美工把图片切成圆角进行显示，这是效率最高的一种方案，但是作为一个能gank全场的程序猿，能自己解决的事情绝不求人。&lt;br&gt;很多情况下需要用户上传图片进行显示，可以让服务端进行处理，但是作为一个…（我就不重复了）。&lt;/p&gt;
&lt;h2 id=&quot;遮罩&quot;&gt;&lt;a href=&quot;#遮罩&quot; class=&quot;headerlink&quot; title=&quot;遮罩&quot;&gt;&lt;/a&gt;遮罩&lt;/h2&gt;&lt;p&gt;通过UIBezierPath画出曲线，然后创建一个CAShaperLayer的对象，将它赋值给需要添加圆角的控件的layer.mask。&lt;br&gt;这种方法是通过遮罩层&lt;code&gt;mask&lt;/code&gt;实现，实际上就会导致离屏渲染。虽然能实现，但是大量圆角图片的时候效果很不理想，卡顿现象也很明显。&lt;/p&gt;
&lt;h2 id=&quot;CoreGraphics绘制&quot;&gt;&lt;a href=&quot;#CoreGraphics绘制&quot; class=&quot;headerlink&quot; title=&quot;CoreGraphics绘制&quot;&gt;&lt;/a&gt;CoreGraphics绘制&lt;/h2&gt;&lt;p&gt;通过CoreGraphics框架去绘制一个圆角的图片，能够完全避免离屏渲染所带来的性能损失。通过&lt;a href=&quot;https://github.com/AYJk/AYViewCorner/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Demo&lt;/a&gt;能很明显的发现差异。但是也存在着一些不足，比如圆角半径最好不要过大，过大会导致绘制出来的结果并不理想，由于是绘制上去的，所以背景色和图片只能存在一种，我这里优先保留了图片。&lt;/p&gt;
&lt;h1 id=&quot;AYViewCorner用法&quot;&gt;&lt;a href=&quot;#AYViewCorner用法&quot; class=&quot;headerlink&quot; title=&quot;AYViewCorner用法&quot;&gt;&lt;/a&gt;AYViewCorner用法&lt;/h1&gt;&lt;h2 id=&quot;UIButton&quot;&gt;&lt;a href=&quot;#UIButton&quot; class=&quot;headerlink&quot; title=&quot;UIButton&quot;&gt;&lt;/a&gt;UIButton&lt;/h2&gt;&lt;p&gt;如果你想要设置 UIButton 的圆角：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; *testButton = [[&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; alloc] initWithFrame:&lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[testButton setTitle:&lt;span class=&quot;string&quot;&gt;@&quot;normal&quot;&lt;/span&gt; forState:&lt;span class=&quot;built_in&quot;&gt;UIControlStateNormal&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[testButton setTitle:&lt;span class=&quot;string&quot;&gt;@&quot;highlight&quot;&lt;/span&gt; forState:&lt;span class=&quot;built_in&quot;&gt;UIControlStateHighlighted&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[testButton ay_setCornerRadius:AYRadiusMake(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;) setNormalImage:[&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageNamed:normalImage] highlightedImage:[&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageNamed:highlightedImage] disabledImage:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; selectedImage:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; backgroundColor:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.contentView&lt;/span&gt; addSubview:testButton];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Button中推荐用该方法去设置，包含了不同 UIControlState 下的不同图片设置，不需要的状态图设置为nil即可。&lt;br&gt;标题仍然按照系统提供的方法进行设置就OK。&lt;/p&gt;
&lt;h2 id=&quot;UIView-UILabel&quot;&gt;&lt;a href=&quot;#UIView-UILabel&quot; class=&quot;headerlink&quot; title=&quot;UIView/UILabel&quot;&gt;&lt;/a&gt;UIView/UILabel&lt;/h2&gt;&lt;p&gt;如果你想要设置 UIView/UILabel 的圆角：&lt;/p&gt;
&lt;h3 id=&quot;UIView&quot;&gt;&lt;a href=&quot;#UIView&quot; class=&quot;headerlink&quot; title=&quot;UIView&quot;&gt;&lt;/a&gt;UIView&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *colorView = [[&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; alloc] initWithFrame:&lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;240&lt;/span&gt; , &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[colorView ay_setCornerRadius:AYRadiusMake(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;) backgroundColor:[&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; redColor]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.contentView&lt;/span&gt; addSubview:colorView];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;UILabel&quot;&gt;&lt;a href=&quot;#UILabel&quot; class=&quot;headerlink&quot; title=&quot;UILabel&quot;&gt;&lt;/a&gt;UILabel&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UILabel&lt;/span&gt; *testLabel = [[&lt;span class=&quot;built_in&quot;&gt;UILabel&lt;/span&gt; alloc] initWithFrame:&lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;130&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;testLabel&lt;span class=&quot;variable&quot;&gt;.text&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;@&quot;LabelLabel&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[testLabel ay_setCornerRadius:AYRadiusMake(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;) backgroundColor:[&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; blueColor]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.contentView&lt;/span&gt; addSubview:testLabel];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;UIImageView&quot;&gt;&lt;a href=&quot;#UIImageView&quot; class=&quot;headerlink&quot; title=&quot;UIImageView&quot;&gt;&lt;/a&gt;UIImageView&lt;/h2&gt;&lt;p&gt;如果你想要设置 UIImageView 的圆角：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIImageView&lt;/span&gt; *imageView = [[&lt;span class=&quot;built_in&quot;&gt;UIImageView&lt;/span&gt; alloc] initWithFrame:&lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;imageView&lt;span class=&quot;variable&quot;&gt;.image&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageNamed:image];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[imageView ay_setCornerRadius:AYRadiusMake(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;) backgroundImage:[&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageNamed:backgroundImage] backgroundColor:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; withContentMode:&lt;span class=&quot;built_in&quot;&gt;UIViewContentModeScaleToFill&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.contentView&lt;/span&gt; addSubview:imageView];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;同时，如果你想设置 UIImageView 的 UIViewContentMode，建议调用下面的方法：&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)ay_setCornerRadius:(AYRadius)cornerRadius backgroundImage:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)image backgroundColor:(&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; *)color withContentMode:(&lt;span class=&quot;built_in&quot;&gt;UIViewContentMode&lt;/span&gt;)contentMode;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;如果同时设置图片和颜色，只会显示图片。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;当项目中需要离屏渲染的地方不多时，性能的影响并不是很大，基本也能保持在60fps左右，但是一旦超过一定数目的圆角，滑动起来就会有明显的卡顿现象。所以，没必要为了不影响体验的情况下强行进行优化，这样做效果并不是很明显。只有当需要优化的时候采取一定的优化方案，才能得到最大的收益。&lt;/p&gt;
&lt;h1 id=&quot;源代码&quot;&gt;&lt;a href=&quot;#源代码&quot; class=&quot;headerlink&quot; title=&quot;源代码&quot;&gt;&lt;/a&gt;源代码&lt;/h1&gt;&lt;p&gt;源代码已经上传至GitHub：&lt;a href=&quot;https://github.com/AYJk/AYViewCorner/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AYViewCorner&lt;/a&gt;，如果觉得这个工具类还行，就顺手丢个star哦。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;离屏渲染是导致APP性能损失的一大问题，开发时应该尽可能的避免。所以趁着节假日花了一点时间写了一个工具类。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="OffScreen Rendered" scheme="ayjkdev.top/tags/OffScreen-Rendered/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>仿qq未读消息的气泡拖拽效果</title>
    <link href="ayjkdev.top/2016/04/03/bubbleview-like-qq/"/>
    <id>ayjkdev.top/2016/04/03/bubbleview-like-qq/</id>
    <published>2016-04-03T11:21:14.000Z</published>
    <updated>2016-04-03T11:36:06.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;模仿qq的可拖拽未读气泡&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;效果图&quot;&gt;&lt;a href=&quot;#效果图&quot; class=&quot;headerlink&quot; title=&quot;效果图&quot;&gt;&lt;/a&gt;效果图&lt;/h1&gt;&lt;p&gt;效果图如下&lt;br&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/bubbleView.gif&quot; alt=&quot;效果图&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h1&gt;&lt;h2 id=&quot;初始化&quot;&gt;&lt;a href=&quot;#初始化&quot; class=&quot;headerlink&quot; title=&quot;初始化&quot;&gt;&lt;/a&gt;初始化&lt;/h2&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleView&lt;/span&gt; = [[AYBubbleView alloc] initWithCenterPoint:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.center&lt;/span&gt; bubleRadius:&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt; addToSuperView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.decayCoefficent&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;.2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.unReadLabel&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.text&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;@&quot;1&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; redColor];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;) weakSelf = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.cleanMessageBlock&lt;/span&gt; = ^(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; isClean) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isClean) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        weakSelf&lt;span class=&quot;variable&quot;&gt;.messageSteper&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.value&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//            do other logical operation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;初始化的时候配置bubble的中心点坐标、半径和父视图。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;decayCoefficient&lt;/strong&gt;：衰减系数，0~1，值越大，可拉伸的距离越大。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;unreadLabel&lt;/strong&gt;：中间显示的未读数，可自行配置font，color等。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;bubbleColor&lt;/strong&gt;：气泡的颜色&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;cleanMessageBlock&lt;/strong&gt;：清除消息的时候进行回调操作。&lt;/p&gt;
&lt;h2 id=&quot;显示和隐藏&quot;&gt;&lt;a href=&quot;#显示和隐藏&quot; class=&quot;headerlink&quot; title=&quot;显示和隐藏&quot;&gt;&lt;/a&gt;显示和隐藏&lt;/h2&gt;&lt;p&gt;当需要显示气泡的时候调用下面的方法&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleView&lt;/span&gt; showBubbleView];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当需要隐藏气泡的时候调用下面的方法&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bubbleView&lt;/span&gt; hidenBubbleView];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;分析&quot;&gt;&lt;a href=&quot;#分析&quot; class=&quot;headerlink&quot; title=&quot;分析&quot;&gt;&lt;/a&gt;分析&lt;/h1&gt;&lt;p&gt;通过两个view和一个shapLayer来构成整个效果，shapLayer作为连接大view（随手指移动）和小view（原处缩放）&lt;br&gt;拉的越远，shapLayer的边界越弯曲。&lt;br&gt;弯曲效果来自于使用贝塞尔曲线&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *shapePath = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[shapePath moveToPoint:point_A];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[shapePath addQuadCurveToPoint:point_C controlPoint:controlPoint_AC];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[shapePath addLineToPoint:point_D];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[shapePath addQuadCurveToPoint:point_B controlPoint:controlPoint_BD];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[shapePath moveToPoint:point_A];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[shapePath closePath];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;- (void)addQuadCurveToPoint:(CGPoint)endPoint controlPoint:(CGPoint)controlPoint;
&lt;/strong&gt;是生成曲线的关键。&lt;/p&gt;
&lt;h1 id=&quot;源码&quot;&gt;&lt;a href=&quot;#源码&quot; class=&quot;headerlink&quot; title=&quot;源码&quot;&gt;&lt;/a&gt;源码&lt;/h1&gt;&lt;p&gt;已经上传到GitHub了：&lt;a href=&quot;https://github.com/AYJk/AYBubbleView&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AYBubbleView&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;模仿qq的可拖拽未读气泡&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="Animation" scheme="ayjkdev.top/tags/Animation/"/>
    
      <category term="Bubble" scheme="ayjkdev.top/tags/Bubble/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>实现带动画的侧边菜单</title>
    <link href="ayjkdev.top/2016/04/02/slide-menu-ios/"/>
    <id>ayjkdev.top/2016/04/02/slide-menu-ios/</id>
    <published>2016-04-02T08:43:53.000Z</published>
    <updated>2016-04-02T09:10:11.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;这次带来一个带动画效果的SlideMenu，丰富交互。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;实现效果和效果图&quot;&gt;&lt;a href=&quot;#实现效果和效果图&quot; class=&quot;headerlink&quot; title=&quot;实现效果和效果图&quot;&gt;&lt;/a&gt;实现效果和效果图&lt;/h1&gt;&lt;p&gt;侧边动画效果SlideMenu的效果图如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/AYSlideMenu.gif&quot; alt=&quot;效果图&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;实现过程&quot;&gt;&lt;a href=&quot;#实现过程&quot; class=&quot;headerlink&quot; title=&quot;实现过程&quot;&gt;&lt;/a&gt;实现过程&lt;/h2&gt;&lt;p&gt;要产生一个欠阻尼衰减的动画效果，可以Layer自定义Property动画。这里没有这么做，而是通过一个assistView完成。&lt;br&gt;让该辅助视图执行由系统API提供的方法去完成。&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)animateWithDuration:(&lt;span class=&quot;built_in&quot;&gt;NSTimeInterval&lt;/span&gt;)duration delay:(&lt;span class=&quot;built_in&quot;&gt;NSTimeInterval&lt;/span&gt;)delay usingSpringWithDamping:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)dampingRatio initialSpringVelocity:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)velocity options:(&lt;span class=&quot;built_in&quot;&gt;UIViewAnimationOptions&lt;/span&gt;)options animations:(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; (^)(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;))animations completion:(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; (^ __nullable)(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; finished))completion&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;当这个assistView执行动画的时候，就得到了所需要的x坐标的值。用这个x值去控制UIBeizerPath中的controlPoint去不断重绘UI界面，我们就能获得一个带衰减曲线的动画。&lt;/p&gt;
&lt;h2 id=&quot;Tips&quot;&gt;&lt;a href=&quot;#Tips&quot; class=&quot;headerlink&quot; title=&quot;Tips&quot;&gt;&lt;/a&gt;Tips&lt;/h2&gt;&lt;p&gt;Question:如何保证动画的流程？&lt;br&gt;Answer:将获取assistView的坐标的工作通过CADisplayLink去获取，同时将CADisplayLink绑定到RunLoop上。&lt;/p&gt;
&lt;p&gt;Question:动画执行过程中需要获得assistView的实时坐标，怎么获取呢？&lt;br&gt;Answer:通过&lt;strong&gt; presentationLayer &lt;/strong&gt;去获得。&lt;/p&gt;
&lt;h1 id=&quot;使用指南&quot;&gt;&lt;a href=&quot;#使用指南&quot; class=&quot;headerlink&quot; title=&quot;使用指南&quot;&gt;&lt;/a&gt;使用指南&lt;/h1&gt;&lt;h2 id=&quot;如何使用&quot;&gt;&lt;a href=&quot;#如何使用&quot; class=&quot;headerlink&quot; title=&quot;如何使用&quot;&gt;&lt;/a&gt;如何使用&lt;/h2&gt;&lt;h3 id=&quot;导入头文件&quot;&gt;&lt;a href=&quot;#导入头文件&quot; class=&quot;headerlink&quot; title=&quot;导入头文件&quot;&gt;&lt;/a&gt;导入头文件&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#import &lt;span class=&quot;title&quot;&gt;&quot;AYSlideMenu.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;相关属性&quot;&gt;&lt;a href=&quot;#相关属性&quot; class=&quot;headerlink&quot; title=&quot;相关属性&quot;&gt;&lt;/a&gt;相关属性&lt;/h3&gt;&lt;h4 id=&quot;初始化&quot;&gt;&lt;a href=&quot;#初始化&quot; class=&quot;headerlink&quot; title=&quot;初始化&quot;&gt;&lt;/a&gt;初始化&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.slideView&lt;/span&gt; = [[AYSlideView alloc] initWithMenuWidth:&lt;span class=&quot;number&quot;&gt;150&lt;/span&gt; menuTitles:titles];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.slideView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.menuColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; colorWithRed:&lt;span class=&quot;number&quot;&gt;125&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;255.0&lt;/span&gt; green:&lt;span class=&quot;number&quot;&gt;225&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;255.0&lt;/span&gt; blue:&lt;span class=&quot;number&quot;&gt;125&lt;/span&gt;/&lt;span class=&quot;number&quot;&gt;255.0&lt;/span&gt; alpha:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.slideView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.titleColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; darkGrayColor];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.slideView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.buttonActionBlock&lt;/span&gt; = ^(&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; index) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;click button click %ld&quot;&lt;/span&gt;,index);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;调用方法&quot;&gt;&lt;a href=&quot;#调用方法&quot; class=&quot;headerlink&quot; title=&quot;调用方法&quot;&gt;&lt;/a&gt;调用方法&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.slideView&lt;/span&gt; showMenu];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;需要显示的时候调用&lt;strong&gt;showMenu&lt;/strong&gt;就行了。&lt;/p&gt;
&lt;h1 id=&quot;Demo地址&quot;&gt;&lt;a href=&quot;#Demo地址&quot; class=&quot;headerlink&quot; title=&quot;Demo地址&quot;&gt;&lt;/a&gt;Demo地址&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/AYJk/AYSlideMenu&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AYSlideMenu&lt;/a&gt;说实话，由于时间和精力的问题，这个控件做的并不精致，抱歉。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;这次带来一个带动画效果的SlideMenu，丰富交互。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="Animation" scheme="ayjkdev.top/tags/Animation/"/>
    
      <category term="SlideMenu" scheme="ayjkdev.top/tags/SlideMenu/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>一个水滴动效的pageController（二）</title>
    <link href="ayjkdev.top/2016/03/31/ios-anima-page-control/"/>
    <id>ayjkdev.top/2016/03/31/ios-anima-page-control/</id>
    <published>2016-03-31T01:18:22.000Z</published>
    <updated>2016-04-03T11:38:41.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;接上一篇博客&lt;a href=&quot;http://ayjkdev.top/2016/03/25/ios-animation-circle-view/&quot;&gt;一个水滴动效的pageController（一）&lt;/a&gt;。&lt;br&gt;接下来我们会实现相应的带动效的pageControl，在结尾我会附上github地址。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;实现效果原型图和分析&quot;&gt;&lt;a href=&quot;#实现效果原型图和分析&quot; class=&quot;headerlink&quot; title=&quot;实现效果原型图和分析&quot;&gt;&lt;/a&gt;实现效果原型图和分析&lt;/h1&gt;&lt;h2 id=&quot;原型图&quot;&gt;&lt;a href=&quot;#原型图&quot; class=&quot;headerlink&quot; title=&quot;原型图&quot;&gt;&lt;/a&gt;原型图&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/version002.gif&quot; alt=&quot;效果图&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;当前效果只有这么一种，后续我会继续更新动画效果。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;分析&quot;&gt;&lt;a href=&quot;#分析&quot; class=&quot;headerlink&quot; title=&quot;分析&quot;&gt;&lt;/a&gt;分析&lt;/h2&gt;&lt;p&gt;动画实现的一般逻辑就是拆解，将复杂动画拆解成一个个简单动画。我将动画层次分成了两个CALayer，一个是底部的灰色小球的AYLineLayer，另一个是黄色的形变小球AYCircleLayer。&lt;/p&gt;
&lt;h3 id=&quot;AYLineLayer&quot;&gt;&lt;a href=&quot;#AYLineLayer&quot; class=&quot;headerlink&quot; title=&quot;AYLineLayer&quot;&gt;&lt;/a&gt;AYLineLayer&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt; AYLineLayer &lt;/strong&gt;中，当页面切换时当前页面的灰色小球不绘制，留空给AYCircleLayer进行动画展示。&lt;/li&gt;
&lt;li&gt;切换页面时，调用&lt;strong&gt; - (void)drawInContext:(CGContextRef)ctx &lt;/strong&gt;重绘AYLineLayer就行了。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;AYCircleLayer&quot;&gt;&lt;a href=&quot;#AYCircleLayer&quot; class=&quot;headerlink&quot; title=&quot;AYCircleLayer&quot;&gt;&lt;/a&gt;AYCircleLayer&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt; AYCircleLayer &lt;/strong&gt;中的动画并不复杂，首先初始状态是一个圆形。&lt;/li&gt;
&lt;li&gt;往不同方向滑动scrollView的时候会向不同方向进行形变。&lt;/li&gt;
&lt;li&gt;往不同方向滑动scrollView的时候会向不同方向进行位移。&lt;/li&gt;
&lt;li&gt;滑动过程中不断调用&lt;strong&gt; - (void)drawInContext:(CGContextRef)ctx &lt;/strong&gt;重绘AYCircleLayer，产生动画效果。&lt;/li&gt;
&lt;li&gt;移动到另一个点的运动情况是先压缩，后恢复，各占一半。视觉效果相对更好。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;如何使用&quot;&gt;&lt;a href=&quot;#如何使用&quot; class=&quot;headerlink&quot; title=&quot;如何使用&quot;&gt;&lt;/a&gt;如何使用&lt;/h1&gt;&lt;h3 id=&quot;1-导入头文件&quot;&gt;&lt;a href=&quot;#1-导入头文件&quot; class=&quot;headerlink&quot; title=&quot;1.导入头文件&quot;&gt;&lt;/a&gt;1.导入头文件&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;preprocessor&quot;&gt;#import &lt;span class=&quot;title&quot;&gt;&quot;AYPageControl.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-为pageControl设置总页数并绑定scrollview&quot;&gt;&lt;a href=&quot;#2-为pageControl设置总页数并绑定scrollview&quot; class=&quot;headerlink&quot; title=&quot;2.为pageControl设置总页数并绑定scrollview&quot;&gt;&lt;/a&gt;2.为pageControl设置总页数并绑定scrollview&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//	设置总页数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.pageControlView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.numberOfPages&lt;/span&gt; = totalPages;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//	绑定对应的scrollview&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.pageControlView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bindingScrollView&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.bannerScrollView&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//  设置形变小球的颜色&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.pageControlView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.selectedColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; blackColor];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//  设置背景小球的颜色&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.pageControlView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.unSelectedColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; lightGrayColor];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-在代理方法中设置pageControl的属性&quot;&gt;&lt;a href=&quot;#3-在代理方法中设置pageControl的属性&quot; class=&quot;headerlink&quot; title=&quot;3.在代理方法中设置pageControl的属性&quot;&gt;&lt;/a&gt;3.在代理方法中设置pageControl的属性&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//	将scrollview的contentOffset.x赋值给pageControl进行计算&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)scrollViewDidScroll:(&lt;span class=&quot;built_in&quot;&gt;UIScrollView&lt;/span&gt; *)scrollView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.pageControlView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.contentOffset_x&lt;/span&gt; = scrollView&lt;span class=&quot;variable&quot;&gt;.contentOffset&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//  scrollview滑动玩后将最终的contentOffset传递过去&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)scrollViewDidEndDecelerating:(&lt;span class=&quot;built_in&quot;&gt;UIScrollView&lt;/span&gt; *)scrollView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.pageControlView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.lastContentOffset_x&lt;/span&gt; = scrollView&lt;span class=&quot;variable&quot;&gt;.contentOffset&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//  scrollview滑动玩后将最终的contentOffset传递过去（暂时未用到，后期添加功能使用）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)scrollViewDidEndScrollingAnimation:(&lt;span class=&quot;built_in&quot;&gt;UIScrollView&lt;/span&gt; *)scrollView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.pageControlView&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.lastContentOffset_x&lt;/span&gt; = scrollView&lt;span class=&quot;variable&quot;&gt;.contentOffset&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;附上GitHub地址 &lt;a href=&quot;https://github.com/AYJk/AYPageControl&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AYPageControl&lt;/a&gt; 打开直接运行Demo即可。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;接上一篇博客&lt;a href=&quot;http://ayjkdev.top/2016/03/25/ios-animation-circle-view/&quot;&gt;一个水滴动效的pageController（一）&lt;/a&gt;。&lt;br&gt;接下来我们会实现相应的带动效的pageControl，在结尾我会附上github地址。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="Animation" scheme="ayjkdev.top/tags/Animation/"/>
    
      <category term="PageControl" scheme="ayjkdev.top/tags/PageControl/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>一个水滴动效的pageController（一）</title>
    <link href="ayjkdev.top/2016/03/25/ios-animation-circle-view/"/>
    <id>ayjkdev.top/2016/03/25/ios-animation-circle-view/</id>
    <published>2016-03-25T07:34:06.000Z</published>
    <updated>2016-04-03T11:38:48.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;首先感谢&lt;a href=&quot;http://book.kittenyang.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;KittenYang&lt;/a&gt;能写出一本这么好的交互书。这本书对我的影响很大，是我奋斗的目标。&lt;br&gt;接下来我会对其中的部分实现就行说明讲解：&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;实现效果的原型图和分析&quot;&gt;&lt;a href=&quot;#实现效果的原型图和分析&quot; class=&quot;headerlink&quot; title=&quot;实现效果的原型图和分析&quot;&gt;&lt;/a&gt;实现效果的原型图和分析&lt;/h1&gt;&lt;h2 id=&quot;原型图：&quot;&gt;&lt;a href=&quot;#原型图：&quot; class=&quot;headerlink&quot; title=&quot;原型图：&quot;&gt;&lt;/a&gt;原型图：&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/circleView.gif&quot; alt=&quot;原型效果图&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;分析：&quot;&gt;&lt;a href=&quot;#分析：&quot; class=&quot;headerlink&quot; title=&quot;分析：&quot;&gt;&lt;/a&gt;分析：&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/objectMenu.png&quot; alt=&quot;工程目录结构&quot;&gt;&lt;br&gt;可以看出目录结构很简单，实现的原理也并不难，动画通过不断的在AYCircleLayer中对上下文重绘贝塞尔曲线得到相应的动画效果，AYCircleView作为容器，在AYCirleView的layer层上加一层AYCircleLayer对象就完成了基本的层次结构。&lt;br&gt;关键的地方在AYCircleLayer中上下文的绘制。&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; offset = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;3.6&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; moveDistance = (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;) * fabs(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.currentProgress&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;) * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在&lt;strong&gt; - (void)drawInContext:(CGContextRef)ctx &lt;/strong&gt;方法中通过计算出offset来定位各个controlPoint进行对水滴的绘制，计算出moveDistance来控制图形变化。&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; rectCenter = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_A = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(rectCenter&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + moveDistance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_B = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.moveDirection&lt;/span&gt; == Move_Right ? rectCenter&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt;:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt; + rectCenter&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; + moveDistance * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, rectCenter&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_C = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(rectCenter&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;, rectCenter&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;.5&lt;/span&gt; - moveDistance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_D = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.moveDirection&lt;/span&gt; == Move_Right ? &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; - moveDistance * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;, rectCenter&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c1 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_A&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; + offset, point_A&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c2 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_B&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.moveDirection&lt;/span&gt; == Move_Right ? point_B&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; - offset:point_B&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; - offset + moveDistance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c3 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_B&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.moveDirection&lt;/span&gt; == Move_Right ? point_B&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + offset:point_B&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + offset - moveDistance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c4 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_C&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; + offset, point_C&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c5 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_C&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; - offset, point_C&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c6 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_D&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.moveDirection&lt;/span&gt; == Move_Right ? point_D&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + offset - moveDistance:point_D&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + offset);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c7 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_D&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.moveDirection&lt;/span&gt; == Move_Right ? point_D&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; - offset + moveDistance:point_D&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; - offset);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point_c8 = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point_A&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; - offset,point_A&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;point_A~point_D就是对应图形上下左右的四个切点，辅助定位point_c1~point_c8这8个controlPoint。&lt;br&gt;动画效果是左右移动，所以对应的是point_B和point_D移动，需要判断移动方向来确定相应的位置。同理point_c3、point_c2、point_c6、point_c7也是需要判断位移方向的，判断方法也很简单。&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *rectPath = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPathWithRect:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.outsideRect&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextAddPath&lt;/span&gt;(ctx, rectPath&lt;span class=&quot;variable&quot;&gt;.CGPath&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetStrokeColorWithColor&lt;/span&gt;(ctx, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; blackColor]&lt;span class=&quot;variable&quot;&gt;.CGColor&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetLineWidth&lt;/span&gt;(ctx, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; dash[] = &amp;#123;&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetLineDash&lt;/span&gt;(ctx, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, dash, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextStrokePath&lt;/span&gt;(ctx);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这里的操作是添加了圆的外接矩形，用于辅助调试，真实项目中不必加入。&lt;br&gt;其中&lt;strong&gt; CGContextSetLineDash &lt;/strong&gt; 用于绘制虚线，phase表示第一次绘制的时候跳过多少个点，lengths{10，20，10}时，表示先绘制10个点跳过20个点，再绘制10个点，再跳过10个点，再绘制20个点，如此反复count的值等于dash数组的长度&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *ovalPath = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ovalPath moveToPoint:point_A];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ovalPath addCurveToPoint:point_B controlPoint1:point_c1 controlPoint2:point_c2];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ovalPath addCurveToPoint:point_C controlPoint1:point_c3 controlPoint2:point_c4];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ovalPath addCurveToPoint:point_D controlPoint1:point_c5 controlPoint2:point_c6];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ovalPath addCurveToPoint:point_A controlPoint1:point_c7 controlPoint2:point_c8];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ovalPath closePath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextAddPath&lt;/span&gt;(ctx, ovalPath&lt;span class=&quot;variable&quot;&gt;.CGPath&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetStrokeColorWithColor&lt;/span&gt;(ctx, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; blackColor]&lt;span class=&quot;variable&quot;&gt;.CGColor&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(ctx, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; yellowColor]&lt;span class=&quot;variable&quot;&gt;.CGColor&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetLineDash&lt;/span&gt;(ctx, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextDrawPath&lt;/span&gt;(ctx, k&lt;span class=&quot;built_in&quot;&gt;CGPathFillStroke&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;绘制圆的边界并进行填充。&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(ctx, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; greenColor]&lt;span class=&quot;variable&quot;&gt;.CGColor&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetStrokeColorWithColor&lt;/span&gt;(ctx, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; orangeColor]&lt;span class=&quot;variable&quot;&gt;.CGColor&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *points = @[[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_A],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_B],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_C],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_D],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c1],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c2],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c3],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c4],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c5],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c6],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c7],[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWith&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;:point_c8]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; drawPoint:points withContext:ctx];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *helperLine = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine moveToPoint:point_A];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c1];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c2];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c3];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c4];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c5];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c6];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c7];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine addLineToPoint:point_c8];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[helperLine closePath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextAddPath&lt;/span&gt;(ctx, helperLine&lt;span class=&quot;variable&quot;&gt;.CGPath&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; helpDash[] = &amp;#123;&lt;span class=&quot;number&quot;&gt;5.0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;5.0&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextSetLineDash&lt;/span&gt;(ctx, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, helpDash, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextStrokePath&lt;/span&gt;(ctx);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)drawPoint:(&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)points withContext:(&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt;)ctx &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; *value &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; points) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point = [value &lt;span class=&quot;built_in&quot;&gt;CGPointValue&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGContextFillRect&lt;/span&gt;(ctx, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(point&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt;, point&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;绘制标记和连线，也是用于辅助观察调试，正式项目可去除。通过遍历来绘制点。&lt;/p&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;这个动画中，关键的难点在于BezierPath的运用和思路的正确性。&lt;br&gt;接下一篇博客&lt;a href=&quot;http://ayjkdev.top/2016/03/31/ios-anima-page-control/&quot;&gt;一个水滴动效的pageController（二）&lt;/a&gt;。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;首先感谢&lt;a href=&quot;http://book.kittenyang.com/&quot;&gt;KittenYang&lt;/a&gt;能写出一本这么好的交互书。这本书对我的影响很大，是我奋斗的目标。&lt;br&gt;接下来我会对其中的部分实现就行说明讲解：&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="Animation" scheme="ayjkdev.top/tags/Animation/"/>
    
      <category term="PageControl" scheme="ayjkdev.top/tags/PageControl/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>新人在开发初期遇到的各种问题</title>
    <link href="ayjkdev.top/2016/03/18/solve-questions/"/>
    <id>ayjkdev.top/2016/03/18/solve-questions/</id>
    <published>2016-03-18T01:19:59.000Z</published>
    <updated>2016-03-28T11:10:57.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;博主在自己学习开发过程中遇到或见到的一些问题，与你们分享，希望有所帮助。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;问题排序&quot;&gt;&lt;a href=&quot;#问题排序&quot; class=&quot;headerlink&quot; title=&quot;问题排序&quot;&gt;&lt;/a&gt;问题排序&lt;/h2&gt;&lt;h3 id=&quot;1-报错Switch-is-in-protect-scope&quot;&gt;&lt;a href=&quot;#1-报错Switch-is-in-protect-scope&quot; class=&quot;headerlink&quot; title=&quot;1.报错Switch is in protect scope&quot;&gt;&lt;/a&gt;1.报错Switch is in protect scope&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; (sender&lt;span class=&quot;variable&quot;&gt;.tag&lt;/span&gt;) &amp;#123;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//block方式添加动画，这里需要加上大括号解决报错：Switch is in protect scope&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            center&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; -= &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; animateWithDuration:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; animations:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.buttonImage&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.center&lt;/span&gt; = center;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-使用UITextView输入框上半部仍为空白&quot;&gt;&lt;a href=&quot;#2-使用UITextView输入框上半部仍为空白&quot; class=&quot;headerlink&quot; title=&quot;2.使用UITextView输入框上半部仍为空白&quot;&gt;&lt;/a&gt;2.使用UITextView输入框上半部仍为空白&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.automaticallyAdjustsScrollViewInsets&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;凡是继承UIScrolView的空间都会收到&lt;strong&gt; automaticallyAdjustsScrollViewInsets &lt;/strong&gt;属性的影响。默认为&lt;strong&gt; YES &lt;/strong&gt;，当有UINavigationbar的时候UITextView的表现为上面空白。&lt;br&gt;详情请参考博主的这边文章 &lt;a href=&quot;http://ayjkdev.top/2016/02/20/answer-in-group/&quot;&gt;在交流群中的一次作答&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-在一个UIViewController中更改UITabBar的属性&quot;&gt;&lt;a href=&quot;#3-在一个UIViewController中更改UITabBar的属性&quot; class=&quot;headerlink&quot; title=&quot;3.在一个UIViewController中更改UITabBar的属性&quot;&gt;&lt;/a&gt;3.在一个UIViewController中更改UITabBar的属性&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;在tabBar中声明一个更改的方法。在UIViewController中&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_tabBarC = (TabBarController *)&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.tabBarController&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;取得tabBarController对象，再用_tabBarC去修改属性。&lt;/p&gt;
&lt;h3 id=&quot;4-在Navigation上自定义了右边按钮，如何取得该按钮对象。以及该按钮的属性设定。&quot;&gt;&lt;a href=&quot;#4-在Navigation上自定义了右边按钮，如何取得该按钮对象。以及该按钮的属性设定。&quot; class=&quot;headerlink&quot; title=&quot;4.在Navigation上自定义了右边按钮，如何取得该按钮对象。以及该按钮的属性设定。&quot;&gt;&lt;/a&gt;4.在Navigation上自定义了右边按钮，如何取得该按钮对象。以及该按钮的属性设定。&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;取得对象可以把该按钮设为全局变量或者通过如下代码获取&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.navigationController&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.navigationBar&lt;/span&gt; viewWithTag:tag];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;对按钮的外形就行设定时，放在如下代码的前面。&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.navigationItem&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.rightBarButtonItem&lt;/span&gt; = [[&lt;span class=&quot;built_in&quot;&gt;UIBarButtonItem&lt;/span&gt; alloc] initWithCustomView:_sendButton];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;但是对是否为禁用状态的设定必须在其后。&lt;/p&gt;
&lt;h3 id=&quot;5-在三级控制器中由UITabBarController控制的UINavigationCotroller中，不能通过&quot;&gt;&lt;a href=&quot;#5-在三级控制器中由UITabBarController控制的UINavigationCotroller中，不能通过&quot; class=&quot;headerlink&quot; title=&quot;5.在三级控制器中由UITabBarController控制的UINavigationCotroller中，不能通过&quot;&gt;&lt;/a&gt;5.在三级控制器中由UITabBarController控制的UINavigationCotroller中，不能通过&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.navigationController&lt;/span&gt; popToViewController:mainC animated:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;pop到另一个UINavigationCotroller。只能在同一UINavigationCotroller中push到不同的ViewController。&lt;/p&gt;
&lt;h3 id=&quot;6-计算UITextView中的行数。&quot;&gt;&lt;a href=&quot;#6-计算UITextView中的行数。&quot; class=&quot;headerlink&quot; title=&quot;6.计算UITextView中的行数。&quot;&gt;&lt;/a&gt;6.计算UITextView中的行数。&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UITextView&lt;/span&gt; *textView = (&lt;span class=&quot;built_in&quot;&gt;UITextView&lt;/span&gt; *)[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt; viewWithTag:tag];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *str = textView&lt;span class=&quot;variable&quot;&gt;.text&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; size = [str sizeWithAttributes:@&amp;#123;&lt;span class=&quot;built_in&quot;&gt;NSFontAttributeName&lt;/span&gt;:textView&lt;span class=&quot;variable&quot;&gt;.font&lt;/span&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; colomNumber = textView&lt;span class=&quot;variable&quot;&gt;.contentSize&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt;/size&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%d&quot;&lt;/span&gt;,colomNumber);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;7-更改UISearchBar的cancel按钮显示文本。&quot;&gt;&lt;a href=&quot;#7-更改UISearchBar的cancel按钮显示文本。&quot; class=&quot;headerlink&quot; title=&quot;7.更改UISearchBar的cancel按钮显示文本。&quot;&gt;&lt;/a&gt;7.更改UISearchBar的cancel按钮显示文本。&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;通过遍历定义在searchBar上的子视图来修改。&lt;br&gt;修改之前一定要打开取消按钮才能遍历修改。&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;searchBar&lt;span class=&quot;variable&quot;&gt;.showsCancelButton&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; searchBtn &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; [searchBar&lt;span class=&quot;variable&quot;&gt;.subviews&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] subviews]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([searchBtn isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; *cancalBtn = (&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; *)searchBtn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cancalBtn&lt;span class=&quot;variable&quot;&gt;.enabled&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [cancalBtn setTitle:&lt;span class=&quot;string&quot;&gt;@&quot;取消&quot;&lt;/span&gt; forState:&lt;span class=&quot;built_in&quot;&gt;UIControlStateNormal&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;8-当同一-m文件中出现两个继承于-UIScrollView-的类并设置了代理，使用&quot;&gt;&lt;a href=&quot;#8-当同一-m文件中出现两个继承于-UIScrollView-的类并设置了代理，使用&quot; class=&quot;headerlink&quot; title=&quot;8.当同一.m文件中出现两个继承于 UIScrollView 的类并设置了代理，使用&quot;&gt;&lt;/a&gt;8.当同一.m文件中出现两个继承于 UIScrollView 的类并设置了代理，使用&lt;/h3&gt;&lt;p&gt;&lt;strong&gt; - (void)scrollViewDidScroll:(UIScrollView *)scrollView &lt;/strong&gt;时两个视图各自滚动时都会掉用该方法。可能会产生不必要的bug。&lt;br&gt;解决方法：&lt;br&gt;可以设定对应了tag值来限制实现对应逻辑。&lt;/p&gt;
&lt;h3 id=&quot;9-UITableViewStylePlain-和-UITableViewStyleGrouped-的区别&quot;&gt;&lt;a href=&quot;#9-UITableViewStylePlain-和-UITableViewStyleGrouped-的区别&quot; class=&quot;headerlink&quot; title=&quot;9.  UITableViewStylePlain 和 UITableViewStyleGrouped 的区别&quot;&gt;&lt;/a&gt;9. &lt;strong&gt; UITableViewStylePlain &lt;/strong&gt;和&lt;strong&gt; UITableViewStyleGrouped &lt;/strong&gt;的区别&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;UITableViewStylePlain只有一组，列表形式&lt;br&gt;UITableViewStyleGrouped可以多组，列表分组形式，&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;扩展：如果要在UITableViewCell的头视图上放视图，看需求是怎么样，如果需要头视图跟随tableView滚动，最好选用UITableViewStyleGrouped。&lt;br&gt;UITableViewStylePlain设置头视图是之后，头视图不会跟随tableView滚动。当然，强行设置UITableViewStylePlain也行，不过需要在&lt;strong&gt; - (void)scrollViewDidScroll:(UIScrollView *)scrollView &lt;/strong&gt;中进行计算处理scrollView.contentInset&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)scrollViewDidScroll:(&lt;span class=&quot;built_in&quot;&gt;UIScrollView&lt;/span&gt; *)scrollView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; sectionHeaderHeight = &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (scrollView&lt;span class=&quot;variable&quot;&gt;.contentOffset&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; &amp;lt;= sectionHeaderHeight &amp;amp;&amp;amp; scrollView&lt;span class=&quot;variable&quot;&gt;.contentOffset&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; &amp;gt;= &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        scrollView&lt;span class=&quot;variable&quot;&gt;.contentInset&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;UIEdgeInsetsMake&lt;/span&gt;(-scrollView&lt;span class=&quot;variable&quot;&gt;.contentOffset&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (scrollView&lt;span class=&quot;variable&quot;&gt;.contentOffset&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; &amp;gt;= sectionHeaderHeight) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        scrollView&lt;span class=&quot;variable&quot;&gt;.contentInset&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;UIEdgeInsetsMake&lt;/span&gt;(-sectionHeaderHeight, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;10-隐藏返回按钮&quot;&gt;&lt;a href=&quot;#10-隐藏返回按钮&quot; class=&quot;headerlink&quot; title=&quot;10.隐藏返回按钮&quot;&gt;&lt;/a&gt;10.隐藏返回按钮&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.navigationItem&lt;/span&gt; setHidesBackButton:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; animated:&lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;要写在当前ViewController中。&lt;/p&gt;
&lt;h3 id=&quot;11-取消导航栏返回按钮的title&quot;&gt;&lt;a href=&quot;#11-取消导航栏返回按钮的title&quot; class=&quot;headerlink&quot; title=&quot;11.取消导航栏返回按钮的title&quot;&gt;&lt;/a&gt;11.取消导航栏返回按钮的title&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;UIBarButtonItem&lt;/span&gt; appearance] setBackButtonTitlePositionAdjustment:&lt;span class=&quot;built_in&quot;&gt;UIOffsetMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, -&lt;span class=&quot;number&quot;&gt;60&lt;/span&gt;) forBarMetrics:&lt;span class=&quot;built_in&quot;&gt;UIBarMetricsDefault&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;12-PCH文件的建立&quot;&gt;&lt;a href=&quot;#12-PCH文件的建立&quot; class=&quot;headerlink&quot; title=&quot;12.PCH文件的建立&quot;&gt;&lt;/a&gt;12.PCH文件的建立&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;在Building setting中搜索Prefix Header，将它改为：$(SRCROOT)/项目名/…具体路径/pch文件名&lt;br&gt;如：$(SRCROOT)/TestDemo/test.pch&lt;/p&gt;
&lt;h3 id=&quot;13-自定义UIScrollView的开启PageEnable的翻页效果。&quot;&gt;&lt;a href=&quot;#13-自定义UIScrollView的开启PageEnable的翻页效果。&quot; class=&quot;headerlink&quot; title=&quot;13.自定义UIScrollView的开启PageEnable的翻页效果。&quot;&gt;&lt;/a&gt;13.自定义UIScrollView的开启PageEnable的翻页效果。&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)scrollViewWillEndDragging:(&lt;span class=&quot;built_in&quot;&gt;UIScrollView&lt;/span&gt; *)scrollView withVelocity:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)velocity targetContentOffset:(&lt;span class=&quot;keyword&quot;&gt;inout&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; *)targetContentOffset &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    NSLog(@&quot;%f&quot;,targetContentOffset -&amp;gt; x);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    NSLog(@&quot;%f&quot;,velocity.x);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; currentIndex;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; index = ((kScreenWidth - kCellWidthNeedCut)/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; + targetContentOffset -&amp;gt; x ) / (kScreenWidth - kCellWidthNeedCut);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (currentIndex == index) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (velocity&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; &amp;gt; &lt;span class=&quot;number&quot;&gt;0.4&lt;/span&gt; &amp;amp;&amp;amp; index &amp;lt; _topCollectViewArray&lt;span class=&quot;variable&quot;&gt;.count&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            index ++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (velocity&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; &amp;lt; -&lt;span class=&quot;number&quot;&gt;0.4&lt;/span&gt; &amp;amp;&amp;amp; index &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            index --;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    targetContentOffset -&amp;gt; x =  index * (kScreenWidth - kCellWidthNeedCut);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    currentIndex = index;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;14-JSON文件的读取&quot;&gt;&lt;a href=&quot;#14-JSON文件的读取&quot; class=&quot;headerlink&quot; title=&quot;14.JSON文件的读取&quot;&gt;&lt;/a&gt;14.JSON文件的读取&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//需带上后缀名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)jsonSerializationWithName:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)jsonName &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *jsonPath = [[&lt;span class=&quot;built_in&quot;&gt;NSBundle&lt;/span&gt; mainBundle] pathForResource:jsonName ofType:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *jsonData = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithContentsOfFile:jsonPath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; Dataserialization = [&lt;span class=&quot;built_in&quot;&gt;NSJSONSerialization&lt;/span&gt; JSONObjectWithData:jsonData options:&lt;span class=&quot;built_in&quot;&gt;NSJSONReadingMutableContainers&lt;/span&gt; error:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Dataserialization;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;15-iOS7-tableviewcell上面有button，但是button的点击效果没有&quot;&gt;&lt;a href=&quot;#15-iOS7-tableviewcell上面有button，但是button的点击效果没有&quot; class=&quot;headerlink&quot; title=&quot;15.iOS7 tableviewcell上面有button，但是button的点击效果没有&quot;&gt;&lt;/a&gt;15.iOS7 tableviewcell上面有button，但是button的点击效果没有&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;iOS6的UITableViewCell子视图(subviews)的容器是UITableViewCellContentView&lt;br&gt;iOS7的UITableViewCell子视图(subviews)的容器是UITableViewCellScrollView&lt;br&gt;由于IOS7中添加了滑动后出现编辑按钮的操作，所以使用scrollView来处理，UITableViewCellScrollView有对触摸的相应处理，导致按钮的点击效果被屏蔽了，但是点击事件还是在的，所以可以通过&lt;/p&gt;
&lt;h4 id=&quot;1-设置&quot;&gt;&lt;a href=&quot;#1-设置&quot; class=&quot;headerlink&quot; title=&quot;1.设置&quot;&gt;&lt;/a&gt;1.设置&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tableView&lt;span class=&quot;variable&quot;&gt;.delaysContentTouches&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;2-同时在-UITableViewCell-tableView-UITableView-tableView-cellForRowAtIndexPath-NSIndexPath-indexPath-代理方法中对scrollView把延迟触摸设置为NO即可&quot;&gt;&lt;a href=&quot;#2-同时在-UITableViewCell-tableView-UITableView-tableView-cellForRowAtIndexPath-NSIndexPath-indexPath-代理方法中对scrollView把延迟触摸设置为NO即可&quot; class=&quot;headerlink&quot; title=&quot;2.同时在 (UITableViewCell )tableView:(UITableView )tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath 代理方法中对scrollView把延迟触摸设置为NO即可&quot;&gt;&lt;/a&gt;2.同时在&lt;strong&gt; (UITableViewCell &lt;em&gt;)tableView:(UITableView &lt;/em&gt;)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath &lt;/strong&gt;代理方法中对scrollView把延迟触摸设置为NO即可&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; obj &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; cell&lt;span class=&quot;variable&quot;&gt;.subviews&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;built_in&quot;&gt;NSStringFromClass&lt;/span&gt;([obj class])isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;UITableViewCellScrollView&quot;&lt;/span&gt;])&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;UIScrollView&lt;/span&gt; *scroll = (&lt;span class=&quot;built_in&quot;&gt;UIScrollView&lt;/span&gt; *) obj;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            scroll&lt;span class=&quot;variable&quot;&gt;.delaysContentTouches&lt;/span&gt; =&lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;16-UITableViewCell中的使用cell和cell-contentView的区别&quot;&gt;&lt;a href=&quot;#16-UITableViewCell中的使用cell和cell-contentView的区别&quot; class=&quot;headerlink&quot; title=&quot;16.UITableViewCell中的使用cell和cell.contentView的区别&quot;&gt;&lt;/a&gt;16.UITableViewCell中的使用cell和cell.contentView的区别&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;一般我们向cell中添加子视图，有两种方式&lt;br&gt;1.&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[cell addSubview:]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;2.&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[cell&lt;span class=&quot;variable&quot;&gt;.contentView&lt;/span&gt; addSubview:]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;区别在于进行cell编辑时，比如cell内容向左移或者右移时，第一种方式子视图不会移动，第二种可以，所以这种情况一般使用第二种方式。&lt;br&gt;还有在设置backgroundColor时，使用cell设置时左移或者右移颜色是不会变的，而用cell.contentCell设置时，移动后的空白会显示cell的默认颜色，这种情况视实际情况选择。&lt;br&gt;其实这两种方式在大多数情况是一样，不用纠结。&lt;/p&gt;
&lt;h3 id=&quot;17-设置button的title属性&quot;&gt;&lt;a href=&quot;#17-设置button的title属性&quot; class=&quot;headerlink&quot; title=&quot;17.设置button的title属性&quot;&gt;&lt;/a&gt;17.设置button的title属性&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;btn&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(x, y, width, height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[btn setTitle: &lt;span class=&quot;string&quot;&gt;@&quot;search&quot;&lt;/span&gt; forState: &lt;span class=&quot;built_in&quot;&gt;UIControlStateNormal&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//设置按钮上的自体的大小&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//[btn setFont: [UIFont systemFontSize: 14.0]];    //这种可以用来设置字体的大小，但是可能会在将来的SDK版本中去除改方法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//应该使用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;btn&lt;span class=&quot;variable&quot;&gt;.titleLabel&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.font&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIFont&lt;/span&gt; systemFontOfSize: &lt;span class=&quot;number&quot;&gt;14.0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[btn seBackgroundColor: [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; blueColor]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//最后将按钮加入到指定视图superView&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[superView addSubview: btn];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```objc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;btn = [[&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; alloc] initWithFrame:&lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 这样初始化的button，文字默认颜色是白色的，所有如果背景也是白色的话，是看不到文字的，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;btn&lt;span class=&quot;variable&quot;&gt;.contentHorizontalAlignment&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;UIControlContentHorizontalAlignmentLeft&lt;/span&gt; ;&lt;span class=&quot;comment&quot;&gt;//设置文字位置，现设为居左，默认的是居中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[btn setTitle:@“title” forState:&lt;span class=&quot;built_in&quot;&gt;UIControlStateNormal&lt;/span&gt;];&lt;span class=&quot;comment&quot;&gt;// 添加文字&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 有些时候我们想让UIButton的title居左对齐，我们设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;btn&lt;span class=&quot;variable&quot;&gt;.textLabel&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.textAlignment&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;UITextAlignmentLeft&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 是没有作用的，我们需要设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;btn&lt;span class=&quot;variable&quot;&gt;.contentHorizontalAlignment&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;UIControlContentHorizonAlignmentLeft&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 但是问题又出来，此时文字会紧贴到做边框，我们可以设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;btn&lt;span class=&quot;variable&quot;&gt;.contentEdgeInsets&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;UIEdgeInsetsMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 使文字距离做边框保持10个像素的距离。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;18-项目中需要注意的地方：&quot;&gt;&lt;a href=&quot;#18-项目中需要注意的地方：&quot; class=&quot;headerlink&quot; title=&quot;18.项目中需要注意的地方：&quot;&gt;&lt;/a&gt;18.项目中需要注意的地方：&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;项目更新的时候(Documents 和 Library 会被保留)&lt;br&gt;沙盒路径中三个文件(苹果官方推荐)&lt;br&gt;1.Documents：用户产生的数据，都是一些比较重要的数据，比较小。这里面的数据会自动同步到Ituns(文件&lt;br&gt;不能太大，如果太大，可能上架时会被拒绝);&lt;br&gt;2.Library：1&lt;caches&gt;:电影，音乐，图片，报刊,电子书等等等  &lt;2&gt;Preferences文件夹(会被同步),配置文件。&lt;br&gt;3.tmp：每次应用重启动都会自动清空&lt;br&gt;4.app：(应用程序包) 系统隐藏的。&lt;/2&gt;&lt;/caches&gt;&lt;/p&gt;
&lt;h3 id=&quot;19-取消ScrollView的反弹效果&quot;&gt;&lt;a href=&quot;#19-取消ScrollView的反弹效果&quot; class=&quot;headerlink&quot; title=&quot;19.取消ScrollView的反弹效果&quot;&gt;&lt;/a&gt;19.取消ScrollView的反弹效果&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;self.scrollView.bounces = NO;&lt;/p&gt;
&lt;h3 id=&quot;20-UIView的坐标转换&quot;&gt;&lt;a href=&quot;#20-UIView的坐标转换&quot; class=&quot;headerlink&quot; title=&quot;20.UIView的坐标转换&quot;&gt;&lt;/a&gt;20.UIView的坐标转换&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 将像素point由point所在视图转换到目标视图view中，返回在目标视图view中的像素值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)convertPoint:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point toView:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 将像素point从view中转换到当前视图中，返回在当前视图中的像素值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)convertPoint:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point fromView:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 将rect由rect所在视图转换到目标视图view中，返回在目标视图view中的rect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)convertRect:(&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)rect toView:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 将rect从view中转换到当前视图中，返回在当前视图中的rect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)convertRect:(&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)rect fromView:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;例把&lt;span class=&quot;built_in&quot;&gt;UITableViewCell&lt;/span&gt;中的subview(btn)的frame转换到 controllerA中&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// controllerA 中有一个UITableView, UITableView里有多行UITableVieCell，cell上放有一个button&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 在controllerA中实现:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; rc = [cell convertRect:cell&lt;span class=&quot;variable&quot;&gt;.btn&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt; toView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 或&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; rc = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt; convertRect:cell&lt;span class=&quot;variable&quot;&gt;.btn&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt; fromView:cell];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 此rc为btn在controllerA中的rect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 或当已知btn时：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; rc = [btn&lt;span class=&quot;variable&quot;&gt;.superview&lt;/span&gt; convertRect:btn&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt; toView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 或&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; rc = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt; convertRect:btn&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt; fromView:btn&lt;span class=&quot;variable&quot;&gt;.superview&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;21-取得当前的点和之前的点，转换坐标系，判断当前点是否在视图内&quot;&gt;&lt;a href=&quot;#21-取得当前的点和之前的点，转换坐标系，判断当前点是否在视图内&quot; class=&quot;headerlink&quot; title=&quot;21.取得当前的点和之前的点，转换坐标系，判断当前点是否在视图内&quot;&gt;&lt;/a&gt;21.取得当前的点和之前的点，转换坐标系，判断当前点是否在视图内&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; currentPoint = [touch locationInView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; previousPoint = [touch previousLocationInView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;currentPoint = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; convertPoint:currentPoint toView:_myView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_isInside = [_myView pointInside:currentPoint withEvent:event];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;22-处理键盘弹出时，输入框被遮挡的问题：&quot;&gt;&lt;a href=&quot;#22-处理键盘弹出时，输入框被遮挡的问题：&quot; class=&quot;headerlink&quot; title=&quot;22.处理键盘弹出时，输入框被遮挡的问题：&quot;&gt;&lt;/a&gt;22.处理键盘弹出时，输入框被遮挡的问题：&lt;/h3&gt;&lt;p&gt;解决方法：当键盘弹起时，系统会经过注册的观察者发出一个通知。&lt;br&gt;1.注册通知：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; *center = [&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[center addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(keyBoardWillChangeAction:) name:&lt;span class=&quot;built_in&quot;&gt;UIKeyboardWillChangeFrameNotification&lt;/span&gt; object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;2.接受通知后调用方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)keyBoardWillChangeAction:(&lt;span class=&quot;built_in&quot;&gt;NSNotification&lt;/span&gt; *)notiInfo &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    NSLog(@&quot;%@“,notiInfo.name);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    NSLog(@&quot;%@&quot;,notiInfo.userInfo);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    NSLog(@&quot;%@&quot;,notiInfo.object);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; endUserInfoKey = [notiInfo&lt;span class=&quot;variable&quot;&gt;.userInfo&lt;/span&gt;[&lt;span class=&quot;built_in&quot;&gt;UIKeyboardFrameEndUserInfoKey&lt;/span&gt;] &lt;span class=&quot;built_in&quot;&gt;CGRectValue&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; endUsrY = endUserInfoKey&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; finalEndUser = endUsrY - &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.transform&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformMakeTranslation&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, finalEndUser);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;23-高效设置圆角&quot;&gt;&lt;a href=&quot;#23-高效设置圆角&quot; class=&quot;headerlink&quot; title=&quot;23.高效设置圆角&quot;&gt;&lt;/a&gt;23.高效设置圆角&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;如果需要将UIView的4个角全部都为圆角，做法相当简单，只需设置其Layer的cornerRadius属性即可（项目需要使用QuartzCore框架）。而若要指定某几个角（小于4）为圆角而别的不变时，这种方法就不好用了。并且会造成离屏渲染，参考&lt;a href=&quot;http://www.reviewcode.cn/article.html?reviewId=7&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;关于性能的一些问题&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;对于这种情况，Stackoverflow上提供了几种解决方案。其中最简单优雅的方案，就是使用UIBezierPath。下面给出一段示例代码。&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *view2 = [[&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; alloc] initWithFrame:&lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;120&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;80&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;view2&lt;span class=&quot;variable&quot;&gt;.backgroundColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; redColor]; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.view&lt;/span&gt; addSubview:view2];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; *maskPath = [&lt;span class=&quot;built_in&quot;&gt;UIBezierPath&lt;/span&gt; bezierPathWithRoundedRect:view2&lt;span class=&quot;variable&quot;&gt;.bounds&lt;/span&gt; byRoundingCorners:&lt;span class=&quot;built_in&quot;&gt;UIRectCornerBottomLeft&lt;/span&gt; | &lt;span class=&quot;built_in&quot;&gt;UIRectCornerBottomRight&lt;/span&gt; cornerRadii:&lt;span class=&quot;built_in&quot;&gt;CGSizeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CAShapeLayer&lt;/span&gt; *maskLayer = [[&lt;span class=&quot;built_in&quot;&gt;CAShapeLayer&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;maskLayer&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt; = view2&lt;span class=&quot;variable&quot;&gt;.bounds&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;maskLayer&lt;span class=&quot;variable&quot;&gt;.path&lt;/span&gt; = maskPath&lt;span class=&quot;variable&quot;&gt;.CGPath&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;view2&lt;span class=&quot;variable&quot;&gt;.layer&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mask&lt;/span&gt; = maskLayer;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;其中，&lt;br&gt;&lt;strong&gt; byRoundingCorners:UIRectCornerBottomLeft | UIRectCornerBottomRight &lt;/strong&gt;&lt;br&gt;指定了需要成为圆角的角。该参数是UIRectCorner类型的，可选的值有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UIRectCornerTopLeft&lt;/li&gt;
&lt;li&gt;UIRectCornerTopRight&lt;/li&gt;
&lt;li&gt;UIRectCornerBottomLeft&lt;/li&gt;
&lt;li&gt;UIRectCornerBottomRight&lt;/li&gt;
&lt;li&gt;UIRectCornerAllCorners&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;从名字很容易看出来代表的意思，使用“|”来组合就好了。&lt;/p&gt;
&lt;h3 id=&quot;24-DrawRect的注意事项：&quot;&gt;&lt;a href=&quot;#24-DrawRect的注意事项：&quot; class=&quot;headerlink&quot; title=&quot;24.DrawRect的注意事项：&quot;&gt;&lt;/a&gt;24.DrawRect的注意事项：&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;strong&gt; -(void)drawRect:(CGRect)rect &lt;/strong&gt;中rect是bounds，绘制文字等操作时，用的是传进来的rect（bounds）而不是自己设定的带x，y坐标的rect&lt;br&gt;不能自己调用drawRect方法，而是用&lt;strong&gt; [self setNeedsDisplay]; &lt;/strong&gt;让系统去调用。&lt;/p&gt;
&lt;h3 id=&quot;25-多线程中更改刷新界面在主线程还是子线程？&quot;&gt;&lt;a href=&quot;#25-多线程中更改刷新界面在主线程还是子线程？&quot; class=&quot;headerlink&quot; title=&quot;25.多线程中更改刷新界面在主线程还是子线程？&quot;&gt;&lt;/a&gt;25.多线程中更改刷新界面在主线程还是子线程？&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;主线程。在子线程中能更新的UI界面只是一个假象，实际上是子线程运行完毕，回到主线程继续执行UI更新的函数栈，由于时间很短，导致这个错觉。若子线程一直在执行，则主线程执行不了UI更新栈中的内容，UI界面也就不会更新。&lt;/p&gt;
&lt;h3 id=&quot;26-Cell高度自适应：&quot;&gt;&lt;a href=&quot;#26-Cell高度自适应：&quot; class=&quot;headerlink&quot; title=&quot;26.Cell高度自适应：&quot;&gt;&lt;/a&gt;26.Cell高度自适应：&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)tableView:(&lt;span class=&quot;built_in&quot;&gt;UITableView&lt;/span&gt; *)tableView heightForRowAtIndexPath:(&lt;span class=&quot;built_in&quot;&gt;NSIndexPath&lt;/span&gt; *)indexPath &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// _indexPathCell为点击需要刷新的indexPath&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_indexPathCell&lt;span class=&quot;variable&quot;&gt;.row&lt;/span&gt; == indexPath&lt;span class=&quot;variable&quot;&gt;.row&lt;/span&gt; &amp;amp;&amp;amp; _indexPathCell) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        AYCommetModel *model = _mutableArrayOfCommentModel[indexPath&lt;span class=&quot;variable&quot;&gt;.row&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *str = model&lt;span class=&quot;variable&quot;&gt;.content&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// 110为约束总长&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; textLabelWidth = kScreenWidth - &lt;span class=&quot;number&quot;&gt;110&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; strSize = [str boundingRectWithSize:&lt;span class=&quot;built_in&quot;&gt;CGSizeMake&lt;/span&gt;(textLabelWidth, MAXFLOAT) options:&lt;span class=&quot;built_in&quot;&gt;NSStringDrawingUsesLineFragmentOrigin&lt;/span&gt; attributes:@&amp;#123;&lt;span class=&quot;built_in&quot;&gt;NSFontAttributeName&lt;/span&gt;:[&lt;span class=&quot;built_in&quot;&gt;UIFont&lt;/span&gt; systemFontOfSize:&lt;span class=&quot;number&quot;&gt;15.0&lt;/span&gt;]&amp;#125; context:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;]&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//增益 Cell高度减去一行文字的高度&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; offSet = &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;17.895&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//计算总高度&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; sumOfHeight = strSize&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt;  + offSet ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    NSLog(@&quot;indePath.row = %ld , Size = %@,_sumOfHeight = %f&quot;,indexPath.row,NSStringFromCGSize(strSize),sumOfHeight);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; sumOfHeight;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这种方法其实并不是最好的，具体可以参考博主的这篇博客&lt;a href=&quot;http://ayjkdev.top/2016/03/16/cell-with-masonry/&quot;&gt;使用Masonry对cell布局&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;27-NSString转NSDictionary&quot;&gt;&lt;a href=&quot;#27-NSString转NSDictionary&quot; class=&quot;headerlink&quot; title=&quot;27.NSString转NSDictionary&quot;&gt;&lt;/a&gt;27.NSString转NSDictionary&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *infoData = [mutableString dataUsingEncoding:&lt;span class=&quot;built_in&quot;&gt;NSUTF8StringEncoding&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *infoDic = [&lt;span class=&quot;built_in&quot;&gt;NSJSONSerialization&lt;/span&gt; JSONObjectWithData:infoData options:&lt;span class=&quot;built_in&quot;&gt;NSJSONReadingMutableContainers&lt;/span&gt; error:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;转其他也类似，先转成NSData再转成其他的类。&lt;/p&gt;
&lt;h3 id=&quot;28-从服务器GET回来的数据NSData有时候中文乱码。&quot;&gt;&lt;a href=&quot;#28-从服务器GET回来的数据NSData有时候中文乱码。&quot; class=&quot;headerlink&quot; title=&quot;28.从服务器GET回来的数据NSData有时候中文乱码。&quot;&gt;&lt;/a&gt;28.从服务器GET回来的数据NSData有时候中文乱码。&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;先看清GET回来的包头,看清编码方式，有些为GBK编码的需要进行转换。&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSStringEncoding&lt;/span&gt; enc = &lt;span class=&quot;built_in&quot;&gt;CFStringConvertEncodingToNSStringEncoding&lt;/span&gt;(k&lt;span class=&quot;built_in&quot;&gt;CFStringEncodingGB_18030_2000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableString&lt;/span&gt; *mutableString = [[&lt;span class=&quot;built_in&quot;&gt;NSMutableString&lt;/span&gt; alloc] initWithData:data encoding:enc];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;29-想要获取由服务器发回来的http头&quot;&gt;&lt;a href=&quot;#29-想要获取由服务器发回来的http头&quot; class=&quot;headerlink&quot; title=&quot;29.想要获取由服务器发回来的http头&quot;&gt;&lt;/a&gt;29.想要获取由服务器发回来的http头&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;需要将NSURLResponse强转成NSHTTPURLResponse，比如status code 就调用 [httpUTLResponse statusCode]来获取。&lt;/p&gt;
&lt;h3 id=&quot;30-UIButton设置Selected的问题：&quot;&gt;&lt;a href=&quot;#30-UIButton设置Selected的问题：&quot; class=&quot;headerlink&quot; title=&quot;30.UIButton设置Selected的问题：&quot;&gt;&lt;/a&gt;30.UIButton设置Selected的问题：&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;当我们想创建一个自定义背景的按钮时，&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt;* btn = [&lt;span class=&quot;built_in&quot;&gt;UIButton&lt;/span&gt; buttonWithType:&lt;span class=&quot;built_in&quot;&gt;UIButtonTypeCustom&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[btn setBackgroundImage:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt;*) forState:&lt;span class=&quot;built_in&quot;&gt;UIControlStateNormal&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果我们想要一个selected的按钮，&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[btn setBackgroundImage:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt;*) forState:&lt;span class=&quot;built_in&quot;&gt;UIControlStateSelected&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;但这样还是有个问题，当我们设置了btn.selected = YES后，再去点击按钮，&lt;br&gt;发现会变灰色，说明在这个状态下没设置我们的皮肤，&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[btn setBackgroundImage:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt;*) forState:&lt;span class=&quot;built_in&quot;&gt;UIControlStateSelected&lt;/span&gt; ｜ &lt;span class=&quot;built_in&quot;&gt;UIControlStateHighlighted&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;31-BOOL和bool的区别&quot;&gt;&lt;a href=&quot;#31-BOOL和bool的区别&quot; class=&quot;headerlink&quot; title=&quot;31.BOOL和bool的区别&quot;&gt;&lt;/a&gt;31.BOOL和bool的区别&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;说明：Objective-C 中的BOOL实际上是一种对带符号的字符类型（signed char）的类型定义（typedef），它使用8位的存储空间。通过#define指令把YES定义为1，NO定义为0。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：Objective-C 并不会将BOOL作为仅能保存YES或NO值的真正布尔类型来处理。编译器仍将BOOL认作8位二进制数，YES 和 NO 值只是在习惯上的一种理解。&lt;br&gt;问题：如果不小心将一个大于1字节的整型值（比如short或int）赋给一个BOOL变量，那么只有低位字节会用作BOOL值。如果该低位字节刚好为0（比如8960，写成十六进制为0x2300），BOOL值将会被认作是0，即NO值。而对于bool类型，只有true和false的区别，即0为false，非0为true。&lt;br&gt;举例：&lt;br&gt;BOOL  b1=8960;  // 实际是 NO，因为8960换成十六进制为0x2300，BOOL 只有8位存储空间，取0x2300的低8位，00，所以是NO&lt;br&gt;bool  b2=8960;  //实际是true，因为bool类型，非0即为true。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;32-iOS上-更改-状态栏-UIStatusBar-的颜色&quot;&gt;&lt;a href=&quot;#32-iOS上-更改-状态栏-UIStatusBar-的颜色&quot; class=&quot;headerlink&quot; title=&quot;32.iOS上 更改 状态栏(UIStatusBar)的颜色&quot;&gt;&lt;/a&gt;32.iOS上 更改 状态栏(UIStatusBar)的颜色&lt;/h3&gt;&lt;p&gt;解决方法：&lt;/p&gt;
&lt;h4 id=&quot;1-plist设置statusBar&quot;&gt;&lt;a href=&quot;#1-plist设置statusBar&quot; class=&quot;headerlink&quot; title=&quot;1.plist设置statusBar&quot;&gt;&lt;/a&gt;1.plist设置statusBar&lt;/h4&gt;&lt;p&gt;在plist里增加一行 UIStatusBarStyle(或者是“Status bar style”也可以)，这里可以设置两个值，就是UIStatusBarStyleDefault 和 UIStatusBarStyleLightContent&lt;br&gt;这样在app启动的launch页显示的时候，statusBar的样式就是上面plist设置的风格。&lt;/p&gt;
&lt;h4 id=&quot;2-程序代码里设置statusBar&quot;&gt;&lt;a href=&quot;#2-程序代码里设置statusBar&quot; class=&quot;headerlink&quot; title=&quot;2.程序代码里设置statusBar&quot;&gt;&lt;/a&gt;2.程序代码里设置statusBar&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; sharedApplication] setStatusBarStyle:&lt;span class=&quot;built_in&quot;&gt;UIStatusBarStyleLightContent&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;或者&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//相对于上面的接口，这个接口可以动画的改变statusBar的前景色 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; sharedApplication] setStatusBarStyle:&lt;span class=&quot;built_in&quot;&gt;UIStatusBarStyleLightContent&lt;/span&gt; animated:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不仅如此，iOS还很贴心的在UIViewController也增加了几个接口，&lt;br&gt;目的是让状态栏根据当前显示的UIViewController来定制statusBar的前景部分。&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIStatusBarStyle&lt;/span&gt;)preferredStatusBarStyle;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIViewController&lt;/span&gt; *)childViewControllerForStatusBarStyle;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)setNeedsStatusBarAppearanceUpdate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIStatusBarStyle&lt;/span&gt;)preferredStatusBarStyle:&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在你自己的UIViewController里重写此方法，返回你需要的值(UIStatusBarStyleDefault 或者 UIStatusBarStyleLightContent)；&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;这里如果你只是简单的return一个固定的值，那么该UIViewController显示的时候，程序就会马上调用该方法，来改变statusBar的前景部分；&lt;/li&gt;
&lt;li&gt;如果在该UIViewController已经在显示在当前，你可能还要在当前页面不时的更改statusBar的前景色，那么，你首先需要调用下面的setNeedsStatusBarAppearanceUpdate方法(这个方法会通知系统去调用当前UIViewController的preferredStatusBarStyle方法)， 这个和UIView的setNeedsDisplay原理差不多(调用UIView对象的setNeedsDisplay方法后，系统会在下次页面刷新时，调用重绘该view，系统最快能1秒刷新60次页面，具体要看程序设置)。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIViewController&lt;/span&gt; *)childViewControllerForStatusBarStyle:&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个接口也很重要，默认返回值为nil。&lt;br&gt;当我们调用setNeedsStatusBarAppearanceUpdate时，系统会调用application.window的rootViewController的preferredStatusBarStyle方法，我们的程序里一般都是用UINavigationController做root，如果是这种情况，那我们自己的UIViewController里的preferredStatusBarStyle根本不会被调用；&lt;br&gt;这种情况下childViewControllerForStatusBarStyle就派上用场了，&lt;br&gt;我们要子类化一个UINavigationController，在这个子类里面重写childViewControllerForStatusBarStyle方法，如下：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIViewController&lt;/span&gt; *)childViewControllerForStatusBarStyle&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.topViewController&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;上面代码的意思就是说，不要调用我自己(就是UINavigationController)的preferredStatusBarStyle方法，而是去调用navigationController.topViewController的preferredStatusBarStyle方法，这样写的话，就能保证当前显示的UIViewController的preferredStatusBarStyle方法能影响statusBar的前景部分。&lt;/p&gt;
&lt;p&gt;另外，有时我们的当前显示的UIViewController可能有多个childViewController，重写当前UIViewController的childViewControllerForStatusBarStyle方法，让childViewController的preferredStatusBarStyle生效(当前UIViewController的preferredStatusBarStyle就不会被调用了)。&lt;/p&gt;
&lt;p&gt;简单来说，只要UIViewController重写的的childViewControllerForStatusBarStyle方法返回值不是nil，那么，UIViewController的preferredStatusBarStyle方法就不会被系统调用，系统会调用childViewControllerForStatusBarStyle方法返回的UIViewController的preferredStatusBarStyle方法。&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)setNeedsStatusBarAppearanceUpdate:&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;让系统去调用application.window的rootViewController的preferredStatusBarStyle方法,如果rootViewController的childViewControllerForStatusBarStyle返回值不为nil，则参考上面的讲解。&lt;br&gt;设置statusBar的【背景部分】&lt;br&gt;背景部分，简单来说，就是背景色；改变方法有两种：&lt;br&gt;系统提供的方法&lt;br&gt;navigationBar的setBarTintColor接口，用此接口可改变statusBar的背景色&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：一旦你设置了navigationBar的- (void)setBackgroundImage:(UIImage *)backgroundImage forBarMetrics:(UIBarMetrics)barMetrics接口，那么上面的setBarTintColor接口就不能改变statusBar的背景色，statusBar的背景色就会变成纯黑色。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;另辟蹊径&lt;/p&gt;
&lt;p&gt;创建一个UIView，&lt;br&gt;设置该UIView的frame.size 和statusBar大小一样，&lt;br&gt;设置该UIView的frame.origin 为{0,-20},&lt;br&gt;设置该UIView的背景色为你希望的statusBar的颜色，&lt;br&gt;在navigationBar上addSubView该UIView即可。&lt;/p&gt;
&lt;h3 id=&quot;33-Xcode7HTTP协议改为了HTTPS协议，导致应用不正常&quot;&gt;&lt;a href=&quot;#33-Xcode7HTTP协议改为了HTTPS协议，导致应用不正常&quot; class=&quot;headerlink&quot; title=&quot;33.Xcode7HTTP协议改为了HTTPS协议，导致应用不正常&quot;&gt;&lt;/a&gt;33.Xcode7HTTP协议改为了HTTPS协议，导致应用不正常&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;在iOS9 beta1中，苹果将原http协议改成了https协议，使用 TLS1.2 SSL加密请求数据。&lt;br&gt;在info.plist中添加&lt;br&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;NSAppTransportSecurity&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;NSAllowsArbitraryLoads&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;key&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;true&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;title&quot;&gt;dict&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;34-如何让TableView滚动到顶端：&quot;&gt;&lt;a href=&quot;#34-如何让TableView滚动到顶端：&quot; class=&quot;headerlink&quot; title=&quot;34.如何让TableView滚动到顶端：&quot;&gt;&lt;/a&gt;34.如何让TableView滚动到顶端：&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//两种滚动到顶部的方法都可以&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    [_centerTableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [_centerTableView setContentOffset:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)&amp;#123;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&amp;#125; animated:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;35-在UINavigationController中设置问题&quot;&gt;&lt;a href=&quot;#35-在UINavigationController中设置问题&quot; class=&quot;headerlink&quot; title=&quot;35.在UINavigationController中设置问题&quot;&gt;&lt;/a&gt;35.在UINavigationController中设置问题&lt;/h3&gt;&lt;p&gt;解决方法：&lt;br&gt;只能在其中设置它的背景图。button和title在它对应的viewController中设置&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;博主在自己学习开发过程中遇到或见到的一些问题，与你们分享，希望有所帮助。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="Questions" scheme="ayjkdev.top/tags/Questions/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>使用Masonry对cell布局</title>
    <link href="ayjkdev.top/2016/03/16/cell-with-masonry/"/>
    <id>ayjkdev.top/2016/03/16/cell-with-masonry/</id>
    <published>2016-03-15T16:40:50.000Z</published>
    <updated>2016-04-03T11:38:59.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;iOS有多种布局方式，大致分为两种，即可视化布局和代码布局。两者各有优缺点，使用全凭个人喜好。&lt;br&gt;&lt;strong&gt; 1.采用xib或storyboard &lt;/strong&gt;&lt;br&gt;优点：方便快捷，能很快完成UI的适配布局，开发速度快。其中storyboard能看到每个viewController的样式和其中的入栈出栈关系。&lt;br&gt;缺点：storyboard较难进行协同开发，大型项目如果管理不当，很容易出现一团麻的现象。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 2.采用代码布局 &lt;/strong&gt;&lt;br&gt;优点：利于项目管理和后期维护，代码合并。能进行代码重用。（对于部分程序员来说，或许代码更为直观）&lt;br&gt;缺点：开发速度较慢，项目开发周期变长。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;关于Masonry&quot;&gt;&lt;a href=&quot;#关于Masonry&quot; class=&quot;headerlink&quot; title=&quot;关于Masonry&quot;&gt;&lt;/a&gt;关于Masonry&lt;/h2&gt;&lt;p&gt;代码自动布局常见的就是使用第三方布局类库，也有用frame进行硬计算的，直接进行frame计算最不推荐，Magical Number是不可避免的了，代码也显得凌乱，不易于后期维护。&lt;br&gt;在这里推荐一下&lt;a href=&quot;https://github.com/SnapKit/Masonry&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Masonry&lt;/a&gt;，他在GitHub上的star已经破万了，全世界很多开发者都在使用这个库。&lt;/p&gt;
&lt;h2 id=&quot;效果图&quot;&gt;&lt;a href=&quot;#效果图&quot; class=&quot;headerlink&quot; title=&quot;效果图&quot;&gt;&lt;/a&gt;效果图&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/CellAutoLayoutDemo1.gif&quot; alt=&quot;运行效果图&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;代码部分&quot;&gt;&lt;a href=&quot;#代码部分&quot; class=&quot;headerlink&quot; title=&quot;代码部分&quot;&gt;&lt;/a&gt;代码部分&lt;/h2&gt;&lt;p&gt;这里主要讲几个关键的代码段。&lt;/p&gt;
&lt;h3 id=&quot;1-cell布局&quot;&gt;&lt;a href=&quot;#1-cell布局&quot; class=&quot;headerlink&quot; title=&quot;1.cell布局&quot;&gt;&lt;/a&gt;1.cell布局&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configSubViews &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _backgroundImageView = (&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIImageView&lt;/span&gt; *imageView = [&lt;span class=&quot;built_in&quot;&gt;UIImageView&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.contentView&lt;/span&gt; addSubview:imageView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imageView&lt;span class=&quot;variable&quot;&gt;.userInteractionEnabled&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imageView&lt;span class=&quot;variable&quot;&gt;.backgroundColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; yellowColor];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [imageView mas_makeConstraints:^(MASConstraintMaker *make) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.left&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mas_equalTo&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.right&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mas_equalTo&lt;/span&gt;(-&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.top&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mas_equalTo&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.bottom&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mas_equalTo&lt;/span&gt;(-&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imageView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UITapGestureRecognizer&lt;/span&gt; *backGroundImageViewTap = (&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UITapGestureRecognizer&lt;/span&gt; *tapGestureRecognizer = [[&lt;span class=&quot;built_in&quot;&gt;UITapGestureRecognizer&lt;/span&gt; alloc] initWithTarget:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; action:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(tapAction:)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [_backgroundImageView addGestureRecognizer:tapGestureRecognizer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tapGestureRecognizer;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _titleLabel = (&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UILabel&lt;/span&gt; *label = [&lt;span class=&quot;built_in&quot;&gt;UILabel&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [_backgroundImageView addSubview:label];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label&lt;span class=&quot;variable&quot;&gt;.numberOfLines&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [label mas_makeConstraints:^(MASConstraintMaker *make) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.left&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_left&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.right&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_right&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(-&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.top&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_top&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _picImageView = (&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIImageView&lt;/span&gt; *imageView = [&lt;span class=&quot;built_in&quot;&gt;UIImageView&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [_backgroundImageView addSubview:imageView];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imageView&lt;span class=&quot;variable&quot;&gt;.backgroundColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; redColor];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [imageView mas_makeConstraints:^(MASConstraintMaker *make) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.left&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_left&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.top&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_titleLabel&lt;span class=&quot;variable&quot;&gt;.mas_bottom&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.mas_equalTo&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;CGSizeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imageView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _contentLabel = (&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UILabel&lt;/span&gt; *label = [&lt;span class=&quot;built_in&quot;&gt;UILabel&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [_backgroundImageView addSubview:label];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label&lt;span class=&quot;variable&quot;&gt;.numberOfLines&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label&lt;span class=&quot;variable&quot;&gt;.preferredMaxLayoutWidth&lt;/span&gt; = kScreenWidth - &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt; * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt; - &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label&lt;span class=&quot;variable&quot;&gt;.font&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIFont&lt;/span&gt; systemFontOfSize:&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label&lt;span class=&quot;variable&quot;&gt;.textAlignment&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;NSTextAlignmentLeft&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label&lt;span class=&quot;variable&quot;&gt;.backgroundColor&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; orangeColor];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label&lt;span class=&quot;variable&quot;&gt;.font&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIFont&lt;/span&gt; systemFontOfSize:&lt;span class=&quot;number&quot;&gt;14.5&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [label mas_makeConstraints:^(MASConstraintMaker *make) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.left&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_left&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.right&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_right&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(-&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.top&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_titleLabel&lt;span class=&quot;variable&quot;&gt;.mas_bottom&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.bottom&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_picImageView&lt;span class=&quot;variable&quot;&gt;.mas_bottom&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        label;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;1.方法&lt;code&gt;configSubViews&lt;/code&gt;的代码，也是整个cell采用Masonry自动布局的核心代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2-获取cell高度&quot;&gt;&lt;a href=&quot;#2-获取cell高度&quot; class=&quot;headerlink&quot; title=&quot;2.获取cell高度&quot;&gt;&lt;/a&gt;2.获取cell高度&lt;/h3&gt;&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)getHeightWidthModel:(UserModel *)model&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    AYTableViewCell *cell = [[AYTableViewCell alloc] initWithStyle:&lt;span class=&quot;built_in&quot;&gt;UITableViewCellStyleDefault&lt;/span&gt; reuseIdentifier:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [cell configCellWithModel:model];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [cell layoutIfNeeded];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; frame = cell&lt;span class=&quot;variable&quot;&gt;.contentLabel&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.frame&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; cellHeight = frame&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.y&lt;/span&gt; + frame&lt;span class=&quot;variable&quot;&gt;.size&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.height&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; cellHeight;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;1.方法&lt;code&gt;getHeightWidthModel:&lt;/code&gt;的代码，通过model来获取cell高度。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;3-通过model把数据传给cell&quot;&gt;&lt;a href=&quot;#3-通过model把数据传给cell&quot; class=&quot;headerlink&quot; title=&quot;3.通过model把数据传给cell&quot;&gt;&lt;/a&gt;3.通过model把数据传给cell&lt;/h3&gt;&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configCellWithModel:(UserModel *)model &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.model&lt;/span&gt; = model;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _titleLabel&lt;span class=&quot;variable&quot;&gt;.text&lt;/span&gt; = model&lt;span class=&quot;variable&quot;&gt;.title&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _picImageView&lt;span class=&quot;variable&quot;&gt;.image&lt;/span&gt; = [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageNamed:model&lt;span class=&quot;variable&quot;&gt;.picture&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _contentLabel&lt;span class=&quot;variable&quot;&gt;.text&lt;/span&gt; = model&lt;span class=&quot;variable&quot;&gt;.content&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (model&lt;span class=&quot;variable&quot;&gt;.isClick&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [_contentLabel mas_remakeConstraints:^(MASConstraintMaker *make) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.left&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_left&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.right&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_right&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(-&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.top&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_titleLabel&lt;span class=&quot;variable&quot;&gt;.mas_bottom&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [_contentLabel mas_remakeConstraints:^(MASConstraintMaker *make) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.left&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_left&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.right&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_backgroundImageView&lt;span class=&quot;variable&quot;&gt;.mas_right&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(-&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//            make.width.mas_equalTo(164);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.top&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_titleLabel&lt;span class=&quot;variable&quot;&gt;.mas_bottom&lt;/span&gt;)&lt;span class=&quot;variable&quot;&gt;.offset&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            make&lt;span class=&quot;variable&quot;&gt;.bottom&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.equalTo&lt;/span&gt;(_picImageView&lt;span class=&quot;variable&quot;&gt;.mas_bottom&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;1.当点击的时候也会调用该方法重新约束&lt;code&gt;_contentLabel&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;讲解&quot;&gt;&lt;a href=&quot;#讲解&quot; class=&quot;headerlink&quot; title=&quot;讲解&quot;&gt;&lt;/a&gt;讲解&lt;/h2&gt;&lt;p&gt;1.&lt;code&gt;configSubViews&lt;/code&gt;方法中只是基本的Masonry使用，主要有清晰的布局思路就可以完成。&lt;br&gt;有一点需要注意的是&lt;code&gt;preferredMaxLayoutWidth&lt;/code&gt;这个属性，Apple官方文档里面是这样写的：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/DCDE7F63-B506-4D7A-AB5D-48CA091AFE1E.png&quot; alt=&quot;preferredMaxLayoutWidth&quot;&gt;&lt;br&gt;这个属性是表示label最大可布局的宽度，如果这个值设置不好，那么高度计算就算出错。高度依赖于宽度，宽度依赖于&lt;code&gt;preferredMaxLayoutWidth&lt;/code&gt;这个属性。（刚开始我也没注意，导致出现高度计算出现很大的差错，后来查了相关资料才了解到。）&lt;/p&gt;
&lt;p&gt;2.&lt;code&gt;getHeightWidthModel:&lt;/code&gt;方法是一个类方法，不能通过&lt;code&gt;[self configCellWithModel:model]&lt;/code&gt;去掉用，所以这里通过重新创建一个cell对象，让cell配置model并调用计算出对应的高度，效果等同。&lt;br&gt;需要注意获取frame的之前需要调用一次&lt;code&gt;layoutIfNeeded&lt;/code&gt;更新布局，而且是要先配置model之后再调用&lt;code&gt;layoutIfNeeded&lt;/code&gt;，才能获取正确的frame，否则获取到的就是CGRectZero了。&lt;/p&gt;
&lt;p&gt;3.&lt;code&gt;configCellWithModel:&lt;/code&gt;方法中判断是否点击然后通过&lt;code&gt;mas_remakeConstraints:&lt;/code&gt;重新对_contentLabel进行了约束，更新布局。&lt;/p&gt;
&lt;h2 id=&quot;源代码&quot;&gt;&lt;a href=&quot;#源代码&quot; class=&quot;headerlink&quot; title=&quot;源代码&quot;&gt;&lt;/a&gt;源代码&lt;/h2&gt;&lt;p&gt;源代码：&lt;a href=&quot;https://github.com/AYJk/CellAutoLayoutDemo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/AYJk/CellAutoLayoutDemo&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;iOS有多种布局方式，大致分为两种，即可视化布局和代码布局。两者各有优缺点，使用全凭个人喜好。&lt;br&gt;&lt;strong&gt; 1.采用xib或storyboard &lt;/strong&gt;&lt;br&gt;优点：方便快捷，能很快完成UI的适配布局，开发速度快。其中storyboard能看到每个viewController的样式和其中的入栈出栈关系。&lt;br&gt;缺点：storyboard较难进行协同开发，大型项目如果管理不当，很容易出现一团麻的现象。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 2.采用代码布局 &lt;/strong&gt;&lt;br&gt;优点：利于项目管理和后期维护，代码合并。能进行代码重用。（对于部分程序员来说，或许代码更为直观）&lt;br&gt;缺点：开发速度较慢，项目开发周期变长。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="AutoLayout - iOS" scheme="ayjkdev.top/tags/AutoLayout-iOS/"/>
    
      <category term="Masonry" scheme="ayjkdev.top/tags/Masonry/"/>
    
  </entry>
  
  <entry>
    <title>在交流群中的一次作答</title>
    <link href="ayjkdev.top/2016/02/20/answer-in-group/"/>
    <id>ayjkdev.top/2016/02/20/answer-in-group/</id>
    <published>2016-02-20T01:53:35.000Z</published>
    <updated>2016-03-28T11:10:57.000Z</updated>
    
    <content type="html">&lt;h1 id=&quot;问题提出：&quot;&gt;&lt;a href=&quot;#问题提出：&quot; class=&quot;headerlink&quot; title=&quot;问题提出：&quot;&gt;&lt;/a&gt;问题提出：&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/L2C%25WA5QLRBK0%7DBELD2NF64.jpg&quot; alt=&quot;问题演示图&quot;&gt;&lt;br&gt;提问者：“不知道为什么 我在ScrollView中添加三张图片，添加时frame是（0，0，屏宽，300）图片结果不是从顶部添加的，scrollView会有一段间距的。”&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;问题分析：&quot;&gt;&lt;a href=&quot;#问题分析：&quot; class=&quot;headerlink&quot; title=&quot;问题分析：&quot;&gt;&lt;/a&gt;问题分析：&lt;/h1&gt;&lt;h3 id=&quot;1-官方解释&quot;&gt;&lt;a href=&quot;#1-官方解释&quot; class=&quot;headerlink&quot; title=&quot;1.官方解释&quot;&gt;&lt;/a&gt;1.官方解释&lt;/h3&gt;&lt;p&gt;iOS7发布之后，Apple在UIViewController中添加了一个属性 &lt;strong&gt;automaticallyAdjustsScrollViewInsets&lt;/strong&gt; 。iOS7的UI设计理念就是扁平化，高斯模糊效果，这样可以透过导航栏朦胧的看到下面显示的内容，增加美感。&lt;br&gt;关于 &lt;strong&gt;automaticallyAdjustsScrollViewInsets&lt;/strong&gt; 苹果官方给出如下解释：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/DF34815C-FDDE-40B4-80AA-293CDBAA31B9.png&quot; alt=&quot;关于automaticallyAdjustsScrollViewInsets的官方解释&quot;&gt;&lt;/p&gt;
&lt;p&gt;简单理解就是当你的屏幕上出现有status bar，search bar，navigation bar，toolbar或者tab bar的时候自动调整scroll view。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1.此处指的scroll view，不单单指UIScrollView，还包含所有继承自UIScrollView的视图。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2-官方文档中未提及的：&quot;&gt;&lt;a href=&quot;#2-官方文档中未提及的：&quot; class=&quot;headerlink&quot; title=&quot;2.官方文档中未提及的：&quot;&gt;&lt;/a&gt;2.官方文档中未提及的：&lt;/h3&gt;&lt;p&gt;展示图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/1KBBZUJCYRCRDM.jpg&quot; alt=&quot;两个scrollview的情况&quot;&gt;&lt;/p&gt;
&lt;p&gt;如图，当一个视图中存在多个scroll view，则系统默认只对层次结构中最底层的scroll view做偏移。&lt;/p&gt;
&lt;h1 id=&quot;问题解决：&quot;&gt;&lt;a href=&quot;#问题解决：&quot; class=&quot;headerlink&quot; title=&quot;问题解决：&quot;&gt;&lt;/a&gt;问题解决：&lt;/h1&gt;&lt;h3 id=&quot;1-在当前控制器中添加&quot;&gt;&lt;a href=&quot;#1-在当前控制器中添加&quot; class=&quot;headerlink&quot; title=&quot;1.在当前控制器中添加&quot;&gt;&lt;/a&gt;1.在当前控制器中添加&lt;/h3&gt;&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.automaticallyAdjustsScrollViewInsets&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-在当前控制器中添加&quot;&gt;&lt;a href=&quot;#2-在当前控制器中添加&quot; class=&quot;headerlink&quot; title=&quot;2.在当前控制器中添加&quot;&gt;&lt;/a&gt;2.在当前控制器中添加&lt;/h3&gt;&lt;figure class=&quot;highlight objectivec&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.edgesForExtendedLayout&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;UIRectEdgeNone&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;3-既然直接放在控制器的view上会出现我们可能不想要偏移，那其实可以再scroll-view和self-view之前再加一层view也能解决问题。&quot;&gt;&lt;a href=&quot;#3-既然直接放在控制器的view上会出现我们可能不想要偏移，那其实可以再scroll-view和self-view之前再加一层view也能解决问题。&quot; class=&quot;headerlink&quot; title=&quot;3.既然直接放在控制器的view上会出现我们可能不想要偏移，那其实可以再scroll view和self.view之前再加一层view也能解决问题。&quot;&gt;&lt;/a&gt;3.既然直接放在控制器的view上会出现我们可能不想要偏移，那其实可以再scroll view和self.view之前再加一层view也能解决问题。&lt;/h3&gt;&lt;h1 id=&quot;错误理解：&quot;&gt;&lt;a href=&quot;#错误理解：&quot; class=&quot;headerlink&quot; title=&quot;错误理解：&quot;&gt;&lt;/a&gt;错误理解：&lt;/h1&gt;&lt;p&gt;值得注意的是，这里值得偏移64，指的并不是scroll view本身frame偏移，而是指scroll view里的inset，也就是scroll view中的内容。有人可能会理解错了，所以在这里指出一下。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;问题提出：&quot;&gt;&lt;a href=&quot;#问题提出：&quot; class=&quot;headerlink&quot; title=&quot;问题提出：&quot;&gt;&lt;/a&gt;问题提出：&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;http://7xrofo.com1.z0.glb.clouddn.com/L2C%25WA5QLRBK0%7DBELD2NF64.jpg&quot; alt=&quot;问题演示图&quot;&gt;&lt;br&gt;提问者：“不知道为什么 我在ScrollView中添加三张图片，添加时frame是（0，0，屏宽，300）图片结果不是从顶部添加的，scrollView会有一段间距的。”&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="UIScrollView" scheme="ayjkdev.top/tags/UIScrollView/"/>
    
      <category term="automaticallyAdjustsScrollViewInsets" scheme="ayjkdev.top/tags/automaticallyAdjustsScrollViewInsets/"/>
    
      <category term="iOS" scheme="ayjkdev.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>CocoaPods中一些问题的解决</title>
    <link href="ayjkdev.top/2016/01/10/cocoapods-questions/"/>
    <id>ayjkdev.top/2016/01/10/cocoapods-questions/</id>
    <published>2016-01-10T01:53:35.000Z</published>
    <updated>2016-04-03T11:41:29.000Z</updated>
    
    <content type="html">&lt;p&gt;最近回想起以前的一个小项目，做来给自己看漫画的，当时还没有用到CocoaPods去管理第三方库，现在想更换成CocoaPods，但是在更换过程中出现了一点小问题，现在整理下。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;问题一：&quot;&gt;&lt;a href=&quot;#问题一：&quot; class=&quot;headerlink&quot; title=&quot;问题一：&quot;&gt;&lt;/a&gt;问题一：&lt;/h2&gt;&lt;p&gt;通过CocoaPods去导入AFNetworking，执行 pod install –verbose –no-repo-update 终端会有相应的警告：&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[!] The `aikaaikaComic [Debug]` target overrides the `OTHER_LDFLAGS` build setting defined in `Pods/Target Support Files/Pods/Pods.debug.xcconfig&#39;. This can lead to problems with the CocoaPods installation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Use the `$(inherited)` flag, or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Remove the build settings from the target.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[!] The `aikaaikaComic [Release]` target overrides the `OTHER_LDFLAGS` build setting defined in `Pods/Target Support Files/Pods/Pods.release.xcconfig&#39;. This can lead to problems with the CocoaPods installation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Use the `$(inherited)` flag, or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Remove the build settings from the target.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;解决办法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;选择程序 &lt;strong&gt;xxx&lt;/strong&gt; -&amp;gt; &lt;strong&gt;TARGETS&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Build Settings&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;找到 &lt;strong&gt;Other Linker Flags&lt;/strong&gt; 如果里面有配置参数先删除，添加 &lt;strong&gt;$(inherited)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;然后执行 &lt;strong&gt;pod update –verbose –no-repo-update&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;问题二：&quot;&gt;&lt;a href=&quot;#问题二：&quot; class=&quot;headerlink&quot; title=&quot;问题二：&quot;&gt;&lt;/a&gt;问题二：&lt;/h2&gt;&lt;p&gt;编译程序提示错误：&lt;strong&gt;Undefined symbols for architecture i386&lt;/strong&gt; 或 &lt;strong&gt;Undefined symbols for architecture armv7&lt;/strong&gt;&lt;br&gt;解决方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编辑 &lt;strong&gt;Podfile&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;添加&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;post_install do |installer_representation|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    installer_representation.project.targets.each do |target|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        target.build_configurations.each do |config|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            config.build_settings[&#39;ARCHS&#39;] = &#39;armv7 armv7s&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意 &lt;strong&gt;config.build_settings[‘ARCHS’] = ‘armv7 armv7s’&lt;/strong&gt; 和项目的 &lt;strong&gt;xxx&lt;/strong&gt; -&amp;gt; &lt;strong&gt;TARGETS&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Build Settings&lt;/strong&gt; 中的 &lt;strong&gt;Valid Architectures &lt;/strong&gt;的内容对应。&lt;/p&gt;
&lt;h2 id=&quot;问题三：&quot;&gt;&lt;a href=&quot;#问题三：&quot; class=&quot;headerlink&quot; title=&quot;问题三：&quot;&gt;&lt;/a&gt;问题三：&lt;/h2&gt;&lt;p&gt;再次编译提示错误：&lt;strong&gt;lb： library not found for -lPods&lt;/strong&gt; 或者 &lt;strong&gt;lb： library not found for -libPods-AFNetworking.a&lt;/strong&gt;&lt;br&gt;解决方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;编辑 &lt;strong&gt;Podfile&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;在上面添加的内容中再加上 &lt;strong&gt;config.build_settings[‘ONLY_ACTIVE_ARCH’] = ‘NO’&lt;/strong&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;post_install do |installer_representation|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    installer_representation.project.targets.each do |target|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        target.build_configurations.each do |config|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            config.build_settings[&#39;ARCHS&#39;] = &#39;armv7 armv7s&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            config.build_settings[&#39;ONLY_ACTIVE_ARCH&#39;] = &#39;NO&#39;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这是因为 64 位下项目中的 &lt;strong&gt;Build Active Architecture Only&lt;/strong&gt; 默认是 &lt;strong&gt;NO&lt;/strong&gt;，而 &lt;strong&gt;CocoaPods&lt;/strong&gt; 中的是 &lt;strong&gt;YES&lt;/strong&gt;。&lt;br&gt;问题四&lt;br&gt;通过 CocoaPods 引入 BaiduMapAPI ，执行 pod update 终端提示如下：&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[!] The `YYW [Debug]` target overrides the `FRAMEWORK_SEARCH_PATHS` build setting defined in `Pods/Target Support Files/Pods/Pods.debug.xcconfig&#39;. This can lead to problems with the CocoaPods installation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Use the `$(inherited)` flag, or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Remove the build settings from the target.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[!] The `YYW [Release]` target overrides the `FRAMEWORK_SEARCH_PATHS` build setting defined in `Pods/Target Support Files/Pods/Pods.release.xcconfig&#39;. This can lead to problems with the CocoaPods installation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Use the `$(inherited)` flag, or&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - Remove the build settings from the target.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;解决办法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;选择程序 &lt;strong&gt;xxx&lt;/strong&gt; -&amp;gt; &lt;strong&gt;TARGETS&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Build Settings&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;找到 &lt;strong&gt;Library Search Path&lt;/strong&gt; 添加 &lt;strong&gt;$(inherited)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;编译运行通过&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近回想起以前的一个小项目，做来给自己看漫画的，当时还没有用到CocoaPods去管理第三方库，现在想更换成CocoaPods，但是在更换过程中出现了一点小问题，现在整理下。&lt;br&gt;
    
    </summary>
    
      <category term="Develop" scheme="ayjkdev.top/categories/Develop/"/>
    
    
      <category term="CocoaPods - iOS" scheme="ayjkdev.top/tags/CocoaPods-iOS/"/>
    
  </entry>
  
  <entry>
    <title>开始Hexo的第一天</title>
    <link href="ayjkdev.top/2016/01/07/use-hexo/"/>
    <id>ayjkdev.top/2016/01/07/use-hexo/</id>
    <published>2016-01-07T07:12:05.000Z</published>
    <updated>2016-03-18T04:40:11.000Z</updated>
    
    <content type="html">&lt;p&gt;这里是AY，这是我的&lt;a href=&quot;https://github.com/AYJk&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;github&lt;/a&gt;，这是我第一次搭建博客，还和生疏，以后有什么感悟的，能拿出来分享的我会写上来的。&lt;/p&gt;
&lt;p&gt;分享我最喜欢的一段话，来自Linus：&lt;em&gt;Talk is cheap , show me the code.&lt;/em&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这里是AY，这是我的&lt;a href=&quot;https://github.com/AYJk&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;github&lt;/a&gt;，这是我第一次搭建博客，还和生疏，以后有什么感悟的，能拿出来分享的我会写上来的。&lt;/p&gt;
&lt;p&gt;分享我最
    
    </summary>
    
      <category term="Life" scheme="ayjkdev.top/categories/Life/"/>
    
    
      <category term="Hexo" scheme="ayjkdev.top/tags/Hexo/"/>
    
  </entry>
  
</feed>
